{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"簡化後題目敘述"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"showvariable","properties":{"varname":"description"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"輸入說明"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"第一列有一個正整數 $N$ ($1\\le N\\le 10^5$)。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"接下來的 $N$ 列每一列有兩個整數 $a_i, b_i$ ($1\\le a_i, b_i\\le 10^9$)。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"輸出說明"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"輸出 Socket 能夠獲勝的二部圖畫法，除以 $10^9+7$ 的餘數。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"範例輸入 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"1\n1 1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"範例輸出 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"範例輸入 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"1\n1 2\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"範例輸出 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"0\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"OJ 連結"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://open.kattis.com/problems/bipartitebattle"},"children":[{"type":"text","value":"Open Kattis - Bipartite Battle"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"解法"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"這是一道還算經典且有趣的題目～"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"看到「兩人、對稱式、博弈問題」，想到的關鍵字大概就是拈遊戲（Nim Game）與 "},{"type":"element","tagName":"a","properties":{"href":"https://zh.wikipedia.org/wiki/%E5%B0%BC%E5%A7%86%E6%95%B0"},"children":[{"type":"text","value":"SG值（Sprague-Grundy Value）"}]},{"type":"text","value":"了！\n但這題的數字範圍實在是大到非常誇張，因此可以大膽猜測應該是結論題吧哇哈哈哈。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"很用力地嘗試了一些比較小的二分圖以後，首先映入眼簾的是相當不尋常的單一性：所有 $a_i+b_i=N$ 個點的樹的 SG值都相同！而且根據 $N$ 的值，這些 SG 值是交錯進行的："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"display","properties":{"array":"","minWidth":"40","fixedwidthRatios":"[2]","data":"[\"N\", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"display","properties":{"array":"","fixedwidthRatios":"[2]","minWidth":"40","data":"[\"SG值\", 1, 2, 1, 2, 1, 2, 1, 2, 1, 2]"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"為什麼我們注意到樹呢？因為手動計算的時候，前幾小的非樹連通圖只有 cycle 而已啊。我們多嘗試了一些，發現任何 $a_i+b_i=N$ 個點且 $M$ 條邊的二部圖，其 SG 值也總是相等的！於是我們可以整理出以下表格。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"display","properties":{"grid":"","uihelperContentMap":"{\n        \"0\": {fill: \"#FDC\"}\n    }","font":"12pt Roboto","data":"[[\"N\\\\M\", 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10],\n            [1,    1, \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            [2,  \"0\",  2, \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            [3,    1,  3,  1, \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            [4,  \"0\",  2,\"0\",  2,\"0\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            [5,    1,  3,  1,  3,  1,  3,  1, \"\", \"\", \"\", \"\"],\n            [6,  \"0\",  2,\"0\",  2,\"0\",  2,\"0\",  2,\"0\",  2, \"\"],\n            [7,    1,  3,  1,  3,  1,  3,  1,  3,  1,  3,  1]]"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"從表格看起來應該就很明顯了吧！"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"事後諸葛"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"參考程式碼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-cpp"]},"children":[{"type":"text","value":"#include <bits/stdc++.h>\nusing namespace std;\n\n\ntypedef long long LL;\n\nLL bigmod(LL a, LL n, LL mod) {\n  if (n == 0) return 1%mod;\n  if (n == 1) return a%mod;\n  LL r = bigmod(a*a%mod, n/2, mod);\n  if (n%2) r = r*a%mod;\n  return r;\n}\n\nint main() {\n  const LL mod = 1e9+7;\n  LL ret = 1;\n  int N, total = 0;\n  cin >> N;\n  for (int i = 0; i < N; i++) {\n    LL ai, bi;\n    cin >> ai >> bi;\n    total ^= ((ai%2) ^ (bi%2));\n    ret = ret * bigmod(2, ai*bi-(i==0), mod) % mod;\n  }\n  if (total) cout << 0 << endl;\n  else cout << ret << endl;\n  return 0;\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"關於競程日記"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"🍅 如果您想到更多有趣漂亮簡單乾淨的解法話歡迎留言給競程日記小編群！"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ℹ️ 這是一篇投稿給"},{"type":"element","tagName":"a","properties":{"href":"https://www.facebook.com/%E7%AB%B6%E7%A8%8B%E6%97%A5%E8%A8%98-1514973425463954/"},"children":[{"type":"text","value":"競程日記"}]},{"type":"text","value":"的文章，歡迎大家投稿、交流與分享程式解題競賽的點點滴滴！"}]}],"data":{"quirksMode":false}},"frontmatter":{"date":"January 09, 2019","path":"/problem/icpc/asia_hanoi_2018/B","title":"Bipartite Battle","description":"Socket 和 Bash 在玩一個叫做「Bipartite Battle」的遊戲。這個遊戲的進行方式如下：\n\n* Socket 在桌上先畫出 $N$ 組二部圖（bipartite graph）。第 $i$ 組二部圖的兩個部份，分別包含 $a_i$ 個點與 $b_i$ 個點。\n* 接下來，由 Bash 和 Socket 輪流進行。每一個回合，玩家必須選擇 $N$ 個之中的其中一個非空的圖、並且要嘛刪掉一條邊，要嘛去掉一個點。去掉點的當下，所有連著該點的邊也全部都會被去除。\n* 沒辦法進行操作的人就輸了（也就是說當所有圖的邊跟點都被刪掉以後，下一個人就輸了）。\n* Bash 是先手。\n\n當然，Socket 想要畫一些二部圖使得他能夠總是獲勝。請問 Socket 有多少種畫圖的方法？（請輸出答案除以 $10^9+7$ 的餘數。）\n","roadmap_label_h3":null,"backlink":"/icpcblog-weekly-2019"}}},"pageContext":{}}