{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ç°¡åŒ–å¾Œé¡Œç›®æ•˜è¿°"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"showvariable","properties":{"varname":"description"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å…¥èªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"è¼¸å…¥çš„ç¬¬ä¸€åˆ—åŒ…å«å…©å€‹æ•´æ•¸ $N, K$ ($1\\le N\\le 100000; 0\\le K \\le 100000$) ä»£è¡¨åºåˆ—çš„é•·åº¦èˆ‡æ¢ä»¶çš„æ•¸é‡ã€‚ç¬¬äºŒåˆ—åŒ…å« $N$ å€‹æ•´æ•¸ $P_i$ ($-1\\le P_i\\le 1$)ï¼Œè‹¥ $P_i=0$ ä»£è¡¨ç¬¬ $i$ å€‹ä½ç½®é‚„æ²’æœ‰æ±ºå®šæ˜¯ $-1$ é‚„æ˜¯ $1$ï¼Œå¦å‰‡çš„è©± $P_i$ çš„å€¼å·²ç¶“å›ºå®šäº†ã€‚æ¥ä¸‹ä¾†çš„ $K$ åˆ—æ¯ä¸€åˆ—åŒ…å«ä¸‰å€‹æ•´æ•¸ $A_i, B_i, C_i$ ($1\\le A_i \\le B_i\\le N; -N\\le C_i\\le N$)ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å‡ºèªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"è‹¥é€™æ¨£çš„åºåˆ—å­˜åœ¨ï¼Œè¼¸å‡º $N$ å€‹ä»¥ç©ºç™½éš”é–‹çš„æ•´æ•¸ã€‚å¦å‰‡è¼¸å‡º "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Impossible"}]},{"type":"text","value":"ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"3 2\n0 0 0\n1 2 2\n2 3 -1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"1 1 -1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"3 2\n0 -1 0\n1 2 2\n2 3 -1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Impossible\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"OJ é€£çµ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://codeforces.com/gym/102001/problem/H"},"children":[{"type":"text","value":"Codeforces Gym 102001 - H"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è§£æ³•"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"é€šå¸¸è¦æ‰¾å‡ºæœ€å°çš„å­—å…¸é †åºçš„é¡Œç›®ï¼Œçµ•å°èˆ‡ Greedy æ¼”ç®—æ³•è„«ä¸äº†å¹²ä¿‚ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"å¾å‰é¢å¡«éå»"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"é€™é¡Œä¸€å€‹ç›´æ¥çš„æƒ³æ³•å°±æ˜¯å¾æœ€å‰é¢é–‹å§‹ï¼Œä¾åºåœ¨ç©ºæ ¼ï¼ˆ$P_i=0$ è™•ï¼‰å¡«ä¸Š $-1$ï¼Œä¸¦çœ‹çœ‹æ˜¯å¦é•åä»»ä½•ä¸€å€‹æ¢ä»¶ã€‚ä½†ç›´æ¥åšè¦èŠ± $O(NK)$ çš„æ™‚é–“ï¼Œæ‰€ä»¥å¯¦éš›ä¸Š"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"å¾å¾Œé¢æ”¹å›ä¾†"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"å¦ä¸€å€‹æˆ‘è¦ºå¾—åœ¨æ¼”ç®—æ³•ä¸Šé¢å¾ˆå¯¦ç”¨çš„æ–¹æ³•â€”â€”æ‹–å»¶æ³•ï¼ˆLazy Evaluationï¼Œç¸½æ˜¯æ‹–åˆ°æœ€å¾Œä¸€åˆ»æ‰ä½œå¿…è¦çš„æ”¹è®Šï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨é€™é¡Œç•¶ä¸­ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"æˆ‘å€‘å…ˆæŠŠæ‰€æœ‰èƒ½å¤ å¡«æ•¸å­—çš„åœ°æ–¹å…¨éƒ¨å¡«ä¸Š $-1$ï¼Œç„¶å¾Œé€ä¸€æª¢è¦–æ¯å€‹æ¢ä»¶ $(A_i, B_i, C_i)$ï¼Œå¦‚æœé€™å€‹æ¢ä»¶æ²’æœ‰è¢«æ»¿è¶³ï¼Œé‚£æˆ‘å€‘ä¾¿è²ªå¿ƒåœ°å¾ $B_i$ å¾€å›æŸ¥çœ‹ï¼ŒæŠŠæ‰€æœ‰èƒ½æ”¹çš„ $-1$ ä¾åºæ”¹æˆ $1$ï¼Œç›´åˆ°æ¢ä»¶è¢«æ»¿è¶³ç‚ºæ­¢ã€‚å¦‚æœæŒ‰ç…§"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"å³ç•Œ"}]},{"type":"text","value":" $B_i$ ç”±å°åˆ°å¤§ä¾åºæŠŠæ¢ä»¶åŠ é€²å»çš„è©±ï¼Œæ¯ä¸€æ¬¡æŠŠ $-1$ æ”¹æˆ $1$ çš„éç¨‹ï¼Œéƒ½ä¿è­‰æœƒé€ ç¦æœªä¾†çš„æ¢ä»¶ï¼Œå› æ­¤æ„Ÿæƒ…ä¸Šæˆ‘å€‘å¯ä»¥å¾—åˆ°å­—å…¸é †åºæœ€å°çš„è§£ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"æª¢æŸ¥ä¸€å€‹æ¢ä»¶éœ€è¦è¨ˆç®—ä¸€æ®µé€£çºŒå’Œï¼Œå¦‚æœä¸æƒ³èŠ±å¤ªå¤šåŠ›æ°£çš„è©±ï¼Œä¸€å€‹ç°¡å–®çš„ "},{"type":"element","tagName":"a","properties":{"href":"https://zh.wikipedia.org/wiki/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84"},"children":[{"type":"text","value":"Fenwick Tree(BIT)"}]},{"type":"text","value":" å°±å¯ä»¥é”åˆ°ç›®æ¨™ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"æˆ‘å€‘æ³¨æ„åˆ°ï¼Œç•¶æˆ‘å€‘æ±ºå®šè¦æŠŠä¸€å€‹ $-1$ æ”¹æˆ $1$ çš„æ™‚å€™ï¼Œé€™å€‹æ•¸å­—å°±å†ä¹Ÿä¸æœƒæ›´æ”¹äº†ã€‚æŒ‰ç…§å³ç•Œé †åºè€ƒæ…®æ¢ä»¶é‚„æœ‰ç¬¬äºŒå€‹å¥½è™•ï¼šå¯ä»¥æŠŠã€Œä»ç„¶å¯æ”¹ã€çš„ä½ç½®ä¸Ÿé€²ä¸€å€‹"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"å †ç–Š"}]},{"type":"text","value":"è£¡é¢ï¼Œé€™å€‹å †ç–Šæœ€ä¸Šé¢çš„ç´¢å¼•å°±æ°å¥½æ˜¯è·é›¢ç•¶å‰å³ç•Œæœ€æ¥è¿‘çš„ä¸€å€‹ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"åƒè€ƒç¨‹å¼ç¢¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-cpp"]},"children":[{"type":"text","value":"#include <iostream>\n#include <vector>\nusing namespace std;\n\nint input[100005];\nint now[100005];\nvector<pair<int, int>> hook[100005];\nvector<int> stack;\nint N, K;\n\n// ä¸€å€‹æ´»ç”Ÿç”Ÿã€è·³è„«æ¡†æ¶ï¼ˆå¥½åƒä¸å¤ªæ‡‰è©²ï¼‰çš„ Fenwick Treeã€‚\nint bit[100005];\n\n// æŠŠ x é€™æ ¼çš„å€¼åŠ ä¸Š vã€‚\nvoid add(int x, int v) {\n  while (x <= N) {\n    bit[x] += v;\n    x += (x & -x);\n  }\n}\n\n// è¨ˆç®—åºåˆ—å‰ x é …çš„ç¸½å’Œã€‚\nint ask(int x) {\n  int ret = 0;\n  while (x) {\n    ret += bit[x];\n    x -= (x & -x);\n  }\n  return ret;\n}\n\n// è¨ˆç®—åºåˆ—å¾ç¬¬ l é …åˆ°ç¬¬ r é …çš„ç¸½å’Œã€‚\nint ask(int l, int r) { return ask(r) - ask(l - 1); }\n\nint main() {\n  cin >> N >> K;\n  for (int i = 1; i <= N; i++) cin >> input[i];\n  for (int i = 1; i <= N; i++) now[i] = (input[i] != 0 ? input[i] : -1);\n  for (int i = 1; i <= N; i++) add(i, now[i]);\n  // æŠŠæ‰€æœ‰æ¢ä»¶ä¾ç…§å³ç•Œçš„é †åº\n  for (int i = 0; i < K; i++) {\n    int l, r, c;\n    cin >> l >> r >> c;\n    hook[r].push_back({l, c});\n  }\n  for (int i = 1; i <= N; i++) {\n    // å¦‚æœç¾åœ¨é€™æ ¼æ˜¯ç©ºçš„ï¼Œå°±æŠŠè¨»æ¨™å¡é€²å †ç–Šè£¡å‚™ç”¨ã€‚\n    if (input[i] == 0) stack.push_back(i);\n    \n    // é€ä¸€æƒéæ‰€æœ‰å³ç•Œåœ¨ i çš„æ¢ä»¶ï¼Œä¸¦è©¦åœ–æ»¿è¶³ä»–å€‘ã€‚\n    for (auto [l, c] : hook[i]) {\n      int v = ask(l, i);\n      // å¦‚æœç•¶å‰ç¸½å’Œä»ä¸é” cï¼Œå°±å¿…é ˆæŠŠæœ€æ¥è¿‘çš„ -1 æ”¹æˆ 1ã€‚\n      while (v < c) {\n        if (stack.empty() || stack.back() < l) {\n          puts(\"Impossible\");\n          return 0;\n        }\n        v += 2;\n        now[stack.back()] = 1;\n        add(stack.back(), 2);\n        stack.pop_back();\n      }\n    }\n  }\n  for (int i = 1; i <= N; i++) {\n    cout << now[i] << ' ';\n  }\n  cout << endl;\n  return 0;\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"å‚™è¨»"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ç¨å¾®å¤šæƒ³ä¸€ä¸‹ä¸‹ï¼Œé€™é¡Œå…¶å¯¦å¯ä»¥åšåˆ° $O(N+K)$ã€‚ä¸éä»¥æ¯”è³½è€Œè¨€ï¼Œ$O((N+K)\\log N)$ å¾ˆå¤ äº†ã€‚æç¤ºï¼šå¯ä»¥å…ˆç¶“éç·šæ€§æ™‚é–“é è™•ç†ï¼ŒæŠŠå·²ç¶“å›ºå®šæ•¸å€¼çš„åœ°æ–¹å…¨éƒ¨è™•ç†æ‰ã€‚å› æ­¤é¡Œç›®å¯ä»¥è½‰åŒ–ç‚ºåœ¨ä¸€å€‹ç©ºçš„åºåˆ—ä¸ŠæŒ‡å®š $\\pm 1$ çš„æ•¸å€¼ã€‚æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨ Disjoint Setï¼Œç¶­è­·å·²ç¶“è¢«æ”¹æˆ $1$ çš„æ‰€æœ‰ä½ç½®ï¼ˆä»¥å€é–“çš„æ–¹å¼å„²å­˜ï¼Œå¦‚æœç›¸é„°å…©å€‹ä½ç½®éƒ½æ˜¯ $1$ï¼Œé‚£éº¼é€™å…©å€‹ä½ç½®åŒå±¬ä¸€å€‹ Setã€‚ï¼‰"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"display","properties":{"array":"","uihelperContentMap":"{\n        \"1\":{fill: \"#FA8\", font: \"bold 24px Courier New\"},\n    }","data":"[\"-1\", \"1\", \"-1\", \"1\"]"},"children":[{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"å› æ­¤è¨ˆç®—é€£çºŒå’Œçš„ä»»å‹™å°±ç­‰åƒ¹æ–¼ç´€éŒ„ç•¶å‰å€é–“ã€Œå·¦æ–¹ã€çš„å€é–“é•·åº¦ç¸½å’Œã€‚é€™å€‹ã€Œå·¦æ–¹å€é–“é•·åº¦ç¸½å’Œã€çš„å€¼ï¼Œå¾ˆå¹¸é‹åœ°ä¸æœƒé »ç¹åœ°è¢«æ›´æ–°ï¼ˆå› ç‚ºæ›´æ–°åªæœƒå¾å·²è€ƒæ…®éçš„ä½ç½®æœ€å³é‚Šé–‹å§‹ï¼Œä¹Ÿå°±æ˜¯ç•¶å‰çš„æœ€å³é‚Šçš„å€é–“ã€‚ï¼‰"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"é—œæ–¼ Greedy æ¼”ç®—æ³•çš„è­‰æ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"é€™çœŸçš„çœŸçš„å¾ˆææ€–ã€‚ä¸è¦å•ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Greedy æ¼”ç®—æ³•æ˜¯ä¸€é¡ï¼Œé€šå¸¸ç›´è¦ºä¸Šå¾ˆå°ï¼Œè­‰æ˜èµ·ä¾†å»å¾ˆå´©æ½°çš„ä¸€é¡æ¼”ç®—æ³•ï¼ˆæ·šçœ¼ç®—æ³•ï¼‰ã€‚å¯ä»¥åƒè€ƒ "},{"type":"element","tagName":"a","properties":{"href":"https://cs.stackexchange.com/questions/59964/how-to-prove-greedy-algorithm-is-correct"},"children":[{"type":"text","value":"Stack Exchange"}]},{"type":"text","value":"ã€"},{"type":"element","tagName":"a","properties":{"href":"http://www.cs.cornell.edu/courses/cs482/2007su/exchange.pdf"},"children":[{"type":"text","value":"åº·ä¹ƒçˆ¾å¤§å­¸è¬›ç¾©"}]},{"type":"text","value":"ã€"},{"type":"element","tagName":"a","properties":{"href":"https://web.stanford.edu/class/archive/cs/cs161/cs161.1138/handouts/120%20Guide%20to%20Greedy%20Algorithms.pdf"},"children":[{"type":"text","value":"å²ä¸¹ä½›å¤§å­¸è¬›ç¾©"}]},{"type":"text","value":"å°æ–¼è­‰æ˜è²ªå©ªæ¼”ç®—æ³•çš„æ­£ç¢ºæ€§æ‰€ä¸‹çš„è¨»è§£ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"é—œæ–¼ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ğŸ… å¦‚æœæ‚¨æƒ³åˆ°æ›´å¤šæœ‰è¶£æ¼‚äº®ç°¡å–®ä¹¾æ·¨çš„è§£æ³•è©±æ­¡è¿ç•™è¨€çµ¦ç«¶ç¨‹æ—¥è¨˜å°ç·¨ç¾¤ï¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"â„¹ï¸ é€™æ˜¯ä¸€ç¯‡æŠ•ç¨¿çµ¦"},{"type":"element","tagName":"a","properties":{"href":"https://www.facebook.com/%E7%AB%B6%E7%A8%8B%E6%97%A5%E8%A8%98-1514973425463954/"},"children":[{"type":"text","value":"ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"çš„æ–‡ç« ï¼Œæ­¡è¿å¤§å®¶æŠ•ç¨¿ã€äº¤æµèˆ‡åˆ†äº«ç¨‹å¼è§£é¡Œç«¶è³½çš„é»é»æ»´æ»´ï¼"}]}],"data":{"quirksMode":false}},"frontmatter":{"date":"January 05, 2019","path":"/problem/icpc/asia_jakarta_2018/H","title":"Lexical Sign Sequence","description":"çµ¦ä½ ä¸€å€‹åŒ…å« $0, 1, -1$ çš„åºåˆ— $P$ï¼Œä½ çš„ä»»å‹™æ˜¯è¦æŠŠæ‰€æœ‰ $0$ æ›æˆ $\\pm 1$ï¼Œä¸¦åŒæ™‚æ»¿è¶³ä»¥ä¸‹ $K$ å€‹æ¢ä»¶ï¼šæ¯ä¸€å€‹æ¢ä»¶ç”±ä¸‰å€‹æ•´æ•¸ $A_i, B_i, C_i$ æè¿°ä¹‹ï¼Œè¡¨ç¤ºå¾ç¬¬ $A_i$ å€‹æ•¸åŠ è‡³ç¬¬ $B_i$ å€‹æ•¸çš„ç¸½å’Œï¼Œå¿…é ˆè¦ $\\ge C_i$ã€‚\n\nè‹¥æœ‰è§£ï¼Œè«‹è¼¸å‡ºå­—å…¸é †åºæœ€å°çš„åºåˆ—ã€‚å¦å‰‡çš„è©±è¼¸å‡º `Impossible`ã€‚\n","roadmap_label_h3":null,"backlink":"/icpcblog-weekly-2019"}}},"pageContext":{}}