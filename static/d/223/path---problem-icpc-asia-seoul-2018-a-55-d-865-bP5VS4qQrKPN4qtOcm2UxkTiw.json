{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ç°¡åŒ–å¾Œé¡Œç›®æ•˜è¿°"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"showvariable","properties":{"varname":"description"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å…¥èªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ç¬¬ä¸€åˆ—åŒ…å«æ•´æ•¸ $n$ ($3\\le n\\le 100000$)ã€‚æ¥ä¸‹ä¾†çš„ $n$ åˆ—æ¯ä¸€åˆ—åŒ…å«å››å€‹æ•´æ•¸ $u_x, u_y, v_x, v_y$ ($u_x < v_x$ ä¸” $u_y > v_y$) è¡¨ç¤ºä¸€å€‹çŸ©å½¢çš„å…©å€‹è§’è½åº§æ¨™ï¼Œå…¶ä¸­ $(u_x, u_y)$ æ˜¯å·¦ä¸Šè§’ã€è€Œ $(v_x, v_y)$ æ˜¯å³ä¸‹è§’ã€‚æ‰€æœ‰åº§æ¨™ç¯„åœéƒ½åœ¨ $-10^7$ å’Œ $10^7$ ä¹‹é–“ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å‡ºèªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"è¼¸å‡ºå…©æ¢æ°´å¹³ç·šèƒ½åˆ‡å‡ºçš„æœ€å¤§çŸ©å½¢æ•¸é‡ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"5\n0 13 4 4\n2 14 11 9\n7 17 12 12\n3 5 16 0\n5 2 13 1\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"5\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"5\n0 4 4 0\n1 3 3 1\n5 8 9 4\n0 12 4 8\n1 11 3 9\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"4\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"OJ é€£çµ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://codeforces.com/gym/101987"},"children":[{"type":"text","value":"Codeforces Gym"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"é¡Œç›®å‡ºè™•"}]},{"type":"text","value":"ï¼šICPC 2018 Asia Seoul Regional"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è§£æ³•"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"é€™é¡Œæ˜¯ç·šæ®µæ¨¹/å€é–“æ¨¹å¾ˆç›´æ¥çš„æ‡‰ç”¨ã€‚ç”±æ–¼åˆ‡å‰²çš„éƒ½æ˜¯æ°´å¹³ç·šï¼Œå°æ–¼æ¯ä¸€å€‹è¼¸å…¥çš„çŸ©å½¢åªè¦è€ƒæ…®å®ƒçš„ Y-åº§æ¨™å€é–“å°±å¯ä»¥äº†ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"åˆ©ç”¨æƒæç·šçš„æ¦‚å¿µï¼Œè€ƒæ…®å…¶ä¸­ Y-åº§æ¨™è¼ƒä½çš„é‚£æ¢ç·šçš„ä½ç½®ï¼ˆæ¯”æ–¹èªªè®“ä¸€å€‹è®Šæ•¸ $y_0$ å¾ä¸‹åˆ°ä¸Šæ…¢æ…¢æ¨é€²ï¼‰ã€‚å›ºå®šäº†é€™æ¢ç·š $y=y_0$ ä»¥å¾Œï¼Œå•é¡Œä¾¿è½‰åŒ–ç‚ºï¼šå¾æ‰€æœ‰æ¯”é€™æ¢ç·šé‚„è¦é«˜çš„å€é–“ä¸­ï¼Œæ‰¾å‡ºä¸€å€‹ $y$ å€¼ä½¿å¾—æˆ³åˆ°çš„å€é–“æ•¸é‡æœ€å¤§ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"éš¨è‘— $y_0$ å€¼è®Šå¤§ï¼Œæ¯”é€™æ¢ç·šé‚„è¦é«˜çš„å€é–“ï¼Œæœƒä¸€å€‹ä¸€å€‹æ¸›å°‘ã€‚å› æ­¤æˆ‘å€‘éœ€è¦ä¸€ç¨®å‹•æ…‹è³‡æ–™çµæ§‹ï¼Œæ”¯æ´æŠŠå€é–“ç§»é™¤å¾Œï¼Œä»å¯ä»¥æ‰¾å‡ºèƒ½æˆ³åˆ°æœ€å¤šå€é–“çš„æ°´å¹³ç·šã€‚ä¸€å€‹ç°¡å–®çš„æƒ³æ³•æ˜¯ç›´æ¥ä½¿ç”¨å€é–“æ¨¹ï¼Œåœ¨ $y_0$ å€¼è®Šå¤§çš„æ™‚å€™é€æ­¥æŠŠè¸©åˆ°çš„å€é–“ç§»é™¤ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"åƒè€ƒç¨‹å¼ç¢¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ä¸‹é¢çš„ç¨‹å¼ç¢¼å¾å¦ä¸€å€‹æ–¹å‘è™•ç†å€é–“æ¨¹çš„æ“ä½œã€‚æˆ‘å€‘å…ˆå°æ‰€æœ‰å€é–“ $I_0, I_1, \\ldots, I_{n-1}$ ä¾ç…§å·¦ç•Œæ’åºï¼ˆé€™å€‹é †åºå°±æ˜¯ç•¶ $y_0$ è®Šå¤§çš„æ™‚å€™ï¼Œæœƒä¾åºç§»é™¤å€é–“çš„é †åºï¼‰ã€‚ç„¶å¾Œæˆ‘å€‘å€’è‘—é †åºæŠŠå€é–“ä¸€å€‹ä¸€å€‹åŠ å…¥ç·šæ®µæ¨¹ï¼Œä¸¦ä¸”è¨ˆç®—å€é–“å€‘ $I_i, I_{i+1}, \\ldots, I_{n-1}$ çš„æœ€å¤§é‡ç–Šæ•¸é‡ï¼ˆå„²å­˜åœ¨ "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"localmax[i]"}]},{"type":"text","value":" é€™å€‹è®Šæ•¸è£¡é¢ï¼‰ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"é è™•ç†å®Œç•¢ä»¥å¾Œï¼Œæˆ‘å€‘è®“ $y_0$ æ²¿è‘—é›¢æ•£åŒ–å¾Œçš„å€é–“åº§æ¨™ä¸€è·¯éå¢ï¼Œç´€éŒ„ç•¶å‰ $y=y_0$ åˆ‡åˆ°çš„å€é–“æ•¸é‡ï¼ˆ"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"now"}]},{"type":"text","value":"ï¼‰ï¼Œä¸¦ä¸”æ‰¾å‡ºæœ€å°çš„ $j$ ä½¿å¾— $I_j$ å·¦ç•Œæ˜¯åš´æ ¼å¤§æ–¼ $y_0$ çš„ã€‚æˆ‘å€‘çš„æ‰€æ±‚å°±æ˜¯ï¼ˆ"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"now + localmax[j]"}]},{"type":"text","value":"ï¼‰"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-cpp"]},"children":[{"type":"text","value":"#include <bits/stdc++.h>\nusing namespace std;\n\n// é›¢æ•£åŒ–ï¼šæŠŠæ‰€æœ‰éœ€è¦çš„åº§æ¨™è¨˜éŒ„ä¸‹ä¾†ï¼Œæ’åºä»¥å¾Œæ›æˆé›¢æ•£åŒ–å¾Œçš„åº§æ¨™ã€‚\nint discretize(vector<pair<int, int>> &a) {\n  vector<int> lisan;\n  for (auto &it : a) {\n    lisan.push_back(it.first);\n    lisan.push_back(it.second);\n  }\n  sort(lisan.begin(), lisan.end());\n  lisan.resize(unique(lisan.begin(), lisan.end()) - lisan.begin());\n  for (size_t i = 0; i < a.size(); i++) {\n    a[i].first =\n        lower_bound(lisan.begin(), lisan.end(), a[i].first) - lisan.begin() + 1;\n    a[i].second = lower_bound(lisan.begin(), lisan.end(), a[i].second) -\n                  lisan.begin() + 1;\n  }\n  return lisan.size();\n}\n\n// å€é–“æ¨¹çš„ç¯€é»è¦å­˜çš„æ±è¥¿ã€‚\nstruct Node {\n  int max, sum;\n  Node(int _max = 0, int _sum = 0) : max(_max), sum(_sum) {}\n};\n\nint main() {\n  // è¼¸å…¥å¾ˆå¤§æ‰€ä»¥è¦åŠ å¿«è®€å–è¼¸å…¥çš„é€Ÿåº¦ã€‚\n  ios_base::sync_with_stdio(false);\n  cin.tie(NULL);\n\n  vector<pair<int, int>> a;\n  int n;\n  cin >> n;\n  for (int i = 0; i < n; i++) {\n    int ux, uy, vx, vy;\n    cin >> ux >> uy >> vx >> vy;\n    a.emplace_back(vy, uy);\n  }\n  // Ranges become [1, m].\n  int m = discretize(a);\n  sort(a.begin(), a.end());\n\n  // Find best offset for an interval tree.\n  int offset = m + 1;\n  while ((offset & -offset) != offset)\n    offset += (offset & -offset);\n\n  vector<int> localmax(n + 1, 0);\n  vector<Node> segtree(2 * offset);\n  const auto pull = [&](int x) {\n    if (x >= offset) {\n      segtree[x].max = segtree[x].sum;\n    } else {\n      segtree[x].max =\n          max(segtree[x * 2].max, segtree[x * 2 + 1].max) + segtree[x].sum;\n    }\n  };\n  auto add_segment = [&](int x, int v) {\n    while (x) {\n      if (x % 2 == 0) {\n        segtree[x].sum += v;\n        pull(x);\n        --x;\n      } else {\n        x /= 2;\n        pull(x + 1);\n      }\n    }\n  };\n\n  for (int i = n - 1; i >= 0; i--) {\n    add_segment(offset + a[i].second, 1);\n    add_segment(offset + a[i].first - 1, -1);\n    localmax[i] = segtree[1].max;\n  }\n\n  vector<int> change(m + 2);\n  for (int i = 0; i < n; i++) {\n    change[a[i].first]++;\n    change[a[i].second + 1]--;\n  }\n  int ans = 0;\n  for (int i = 0, j = 0, now = 0; i <= m; i++) {\n    while (j < n && a[j].first <= i)\n      ++j;\n    now += change[i];\n    ans = max(ans, now + localmax[j]);\n  }\n\n  cout << ans << endl;\n  return 0;\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"é—œæ–¼ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ğŸ… å¦‚æœæ‚¨æƒ³åˆ°æ›´å¤šæœ‰è¶£æ¼‚äº®ç°¡å–®ä¹¾æ·¨çš„è§£æ³•è©±æ­¡è¿ç•™è¨€çµ¦ç«¶ç¨‹æ—¥è¨˜å°ç·¨ç¾¤ï¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"â„¹ï¸ é€™æ˜¯ä¸€ç¯‡æŠ•ç¨¿çµ¦"},{"type":"element","tagName":"a","properties":{"href":"https://www.facebook.com/%E7%AB%B6%E7%A8%8B%E6%97%A5%E8%A8%98-1514973425463954/"},"children":[{"type":"text","value":"ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"çš„æ–‡ç« ï¼Œæ­¡è¿å¤§å®¶æŠ•ç¨¿ã€äº¤æµèˆ‡åˆ†äº«ç¨‹å¼è§£é¡Œç«¶è³½çš„é»é»æ»´æ»´ï¼"}]}],"data":{"quirksMode":false}},"frontmatter":{"date":"January 24, 2019","path":"/problem/icpc/asia_seoul_2018/A","title":"Circuits","description":"çµ¦å¹³é¢ä¸Š $n$ å€‹çŸ©å½¢ï¼Œå•ä»»æ„å…©æ¢æ°´å¹³ç·šèƒ½å¤ åˆ‡éçš„çŸ©å½¢æ•¸é‡çš„æœ€å¤§å€¼ã€‚ï¼ˆåˆ‡åœ¨çŸ©å½¢é‚Šä¸Šä¹Ÿç®—æ•¸ï¼‰ã€‚\n","roadmap_label_h3":null,"backlink":"/icpcblog-weekly-2019","css_title_theme":null,"css_content_theme":null}}},"pageContext":{}}