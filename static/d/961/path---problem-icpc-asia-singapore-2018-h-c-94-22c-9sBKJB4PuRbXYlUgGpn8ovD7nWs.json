{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ç°¡åŒ–å¾Œé¡Œç›®æ•˜è¿°"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"showvariable","properties":{"varname":"description"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å…¥èªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ç¬¬ä¸€åˆ—æœ‰ä¸‰å€‹æ­£æ•´æ•¸ $N, M, B$ ï¼ˆ$1\\le N, M, B\\le 4\\cdot 10^5$ï¼‰ï¼Œä¾åºä»£è¡¨æ£‹ç›¤çš„åˆ—æ•¸èˆ‡è¡Œæ•¸ï¼Œé‚„æœ‰æ–¹æ ¼ç¸½æ•¸ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"æ¥ä¸‹ä¾†æœ‰ $B$ åˆ—ï¼Œæ¯ä¸€åˆ—æœ‰å…©å€‹æ•¸å­— $r, c$ ï¼ˆ$1\\le r\\le N$; $1\\le c\\le M$ï¼‰ä»£è¡¨æ–¹æ ¼çš„ä½ç½®ã€‚é€™ $B$ åˆ—ä¸­çš„ç¬¬ä¸€åˆ—ï¼ŒåŒ…å«äº†åˆå§‹æ–¹å¡Šçš„ä½ç½®ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è¼¸å‡ºèªªæ˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"å¦‚æœä¸å­˜åœ¨ä»»ä½•æ§‹é€ æ£‹ç›¤ä¸Šæ–¹å¡Šçš„æ–¹å¼ï¼Œè«‹è¼¸å‡º "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"impossible"}]},{"type":"text","value":"ã€‚å¦å‰‡çš„è©±ï¼Œè¼¸å‡º "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"possible"}]},{"type":"text","value":"ï¼Œç„¶å¾Œå¾ç¬¬äºŒåˆ—é–‹å§‹è¼¸å‡º $B-1$ åˆ—ï¼Œæ¯ä¸€åˆ—åŒ…å«ä¸€å€‹æ»‘å…¥æ–¹å¡Šçš„æŒ‡ä»¤ï¼šé¦–å…ˆæœ‰ä¸€å€‹æ–¹å‘ $c\\in\\{$ "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"<"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":">"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"^"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v"}]},{"type":"text","value":" $\\}$ã€‚ç„¶å¾Œæœƒè·Ÿè‘—æ»‘å…¥æ–¹å¡Šçš„åˆ—è™Ÿ($r$) æˆ–è¡Œè™Ÿ($c$)ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"3 4 6\n1 1\n1 2\n2 2\n2 3\n3 3\n3 4\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"possible\n< 1\n^ 2\n< 2\n^ 3\n< 3\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å…¥ 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"3 4 9\n3 1\n2 1\n1 1\n1 2\n1 3\n1 4\n2 4\n3 4\n3 3\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ç¯„ä¾‹è¼¸å‡º 2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"impossible\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"OJ é€£çµ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://open.kattis.com/problems/slidingblocks"},"children":[{"type":"text","value":"Open Kattis - Sliding Blocks"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"é¡Œç›®å‡ºè™•"}]},{"type":"text","value":"ï¼šICPC 2018 Asia Singapore Regional"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"è§£æ³•"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"å› ç‚ºæ£‹ç›¤ä¸Šçš„æ‰€æœ‰æ–¹å¡Šæœƒå½¢æˆä¸€æ£µæ¨¹ï¼Œæ‰€ä»¥æˆ‘å€‘å¾åˆå§‹æ–¹å¡Šé–‹å§‹é€²è¡Œ DFS/BFSï¼Œå°±å¯ä»¥å¾—çŸ¥æ¯ä¸€å€‹æ–¹å¡Šæ»‘å…¥çš„æ–¹å‘äº†ã€‚æ ¹æ“šé€™å€‹æ»‘å…¥çš„æ–¹å‘ï¼ŒåŒä¸€è¡Œæˆ–åŒä¸€åˆ—çš„ç›¸é„°æ–¹å¡Šï¼Œå¿…é ˆæœ‰å…ˆå¾Œé †åºæ‰è¡Œï¼ˆç¸½ä¸èƒ½å…ˆæŠŠé„°å±…éƒ½æ”¾é€²å»ï¼Œé€™æ¨£è‡ªå·±å°±æ»‘ä¸é€²å»äº†ï¼‰ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"å› æ­¤ï¼Œåªè¦æº–ç¢ºæŒæ¡å¥½å…ˆå¾Œé †åºï¼Œæœ€å¾Œé€²è¡Œä¸€å€‹æ‹“æ’²æ’åºï¼Œå°±å¯ä»¥æŠŠç­”æ¡ˆæ‰¾å‡ºä¾†å•¦ï¼è«‹åƒè€ƒè½è½é•·çš„ç¨‹å¼ç¢¼ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"åƒè€ƒç¨‹å¼ç¢¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"åœ¨ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº†ä¸€äº›å°æ’‡æ­¥ï¼ˆä¸è¦‹å¾—æ˜¯å¿…è¦çš„ï¼Œä½†ç¸½ä¹‹æˆ‘æ˜¯é€™æ¨£å¯«äº†...ï¼‰ã€‚æ¯”æ–¹èªªï¼Œæˆ‘å€‘æŠŠå››å€‹æ–¹å‘å®šç¾©æˆå·¦å³ä¸€çµ„ã€ä¸Šä¸‹ä¸€çµ„ï¼Œé€™éº¼ä¸€ä¾†è¦å­˜å–"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"åæ–¹å‘"}]},{"type":"text","value":"çš„æ™‚å€™ï¼Œåªè¦é€é XOR 1 å°±å¯ä»¥äº†(æ¯”æ–¹èªª "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"dir^1"}]},{"type":"text","value":")ã€‚"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-cpp"]},"children":[{"type":"text","value":"#include <bits/stdc++.h>\nusing namespace std;\n\nconst int MAXB = 400005;\nint r[MAXB], c[MAXB];\n\nconst vector<string> DSTR = {\">\", \"<\", \"v\", \"^\"};\nstring s[MAXB];\nint face[MAXB];\nint visit[MAXB];\nint link[MAXB][4];\nvector<pair<int, int>> rows[MAXB], cols[MAXB];\n\n// å®šç¾©å››å€‹æ–¹å‘ã€‚\nenum {\n  LEFT = 0,\n  RIGHT = 1,\n  UP = 2,\n  DOWN = 3\n};\n\ninline bool IsNeighbor(int x, int y) {\n  return abs(r[x]-r[y]) + abs(c[x]-c[y]) == 1;\n}\n\nvoid dfs(int x) {\n  visit[x] = 1;\n  for (int dir = 0; dir < 4; dir++) {\n    int y = link[x][dir];\n    if (IsNeighbor(x, y) && !visit[y]) {\n      face[y] = (dir^1);\n      s[y] = DSTR[dir] + \" \" + to_string(dir/2? c[y]: r[y]);\n      dfs(y);\n    }\n  }\n}\n\n// ç´€éŒ„å„ªå…ˆé †åº (å¾—å…ˆæœ‰ y æ‰èƒ½æœ‰ x)ã€‚\nvector<int> deps[MAXB];\ninline void AddLink(int x, int y) {\n  if (x == -1 || y == -1) return;\n  deps[x].push_back(y);\n}\n\n// ç´€éŒ„è§£ç­”ç”¨çš„ã€‚\nvector<int> solution;\nbool no_solution = false;\nvoid topological_sort(int x) {\n  visit[x] = 1;\n  for (auto y : deps[x]) {\n    if (visit[y] == 0)\n      topological_sort(y);\n    else if (visit[y] == 1)\n      no_solution = 1;\n  }\n  solution.push_back(x);\n  visit[x] = 2;\n}\n\nint main() {\n  int N, M, B;\n  cin >> N >> M >> B;\n  for (int i = 0; i < B; i++) {\n    cin >> r[i] >> c[i];\n    rows[r[i]].push_back({c[i], i});\n    cols[c[i]].push_back({r[i], i});\n  }\n  for (int i = 1; i < MAXB; i++) {\n    sort(rows[i].begin(), rows[i].end());\n    sort(cols[i].begin(), cols[i].end());\n  }\n\n  memset(link, -1, sizeof(link));\n  for (int i = 1; i < MAXB; i++) {\n    for (size_t j = 1; j < rows[i].size(); j++) {\n      int prev = rows[i][j-1].second;\n      int now = rows[i][j].second;\n      link[prev][RIGHT] = now;\n      link[now][LEFT] = prev;\n    }\n    for (size_t j = 1; j < cols[i].size(); j++) {\n      int prev = cols[i][j-1].second;\n      int now = cols[i][j].second;\n      link[prev][DOWN] = now;\n      link[now][UP] = prev;\n    }\n  }\n  dfs(0);\n  for (int x = 1; x < B; x++) {\n    AddLink(x, link[x][face[x]]);\n    AddLink(link[x][face[x]^1], x);\n  }\n  memset(visit, 0, sizeof(visit));\n  for (int x = 0; x < B; x++) {\n    if (!visit[x])\n      topological_sort(x);\n  }\n  if (no_solution) {\n    cout << \"impossible\" << endl;\n  } else {\n    cout << \"possible\" << '\\n';\n    for (auto x : solution)\n      if (x != 0)\n        cout << s[x] << '\\n';\n  }\n  return 0;\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"é—œæ–¼ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ğŸ… å¦‚æœæ‚¨æƒ³åˆ°æ›´å¤šæœ‰è¶£æ¼‚äº®ç°¡å–®ä¹¾æ·¨çš„è§£æ³•è©±æ­¡è¿ç•™è¨€çµ¦ç«¶ç¨‹æ—¥è¨˜å°ç·¨ç¾¤ï¼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"â„¹ï¸ é€™æ˜¯ä¸€ç¯‡æŠ•ç¨¿çµ¦"},{"type":"element","tagName":"a","properties":{"href":"https://www.facebook.com/%E7%AB%B6%E7%A8%8B%E6%97%A5%E8%A8%98-1514973425463954/"},"children":[{"type":"text","value":"ç«¶ç¨‹æ—¥è¨˜"}]},{"type":"text","value":"çš„æ–‡ç« ï¼Œæ­¡è¿å¤§å®¶æŠ•ç¨¿ã€äº¤æµèˆ‡åˆ†äº«ç¨‹å¼è§£é¡Œç«¶è³½çš„é»é»æ»´æ»´ï¼"}]}],"data":{"quirksMode":false}},"frontmatter":{"date":"January 18, 2019","path":"/problem/icpc/asia_singapore_2018/H","title":"Sliding Blocks","description":"åœ¨ä¸€å€‹ $N\\times M$ å¤§å°çš„æ–¹æ ¼æ£‹ç›¤ä¸Šï¼Œä¸€é–‹å§‹æ°å¥½æœ‰ä¸€å€‹æ ¼å­ä¸Šé ­æœ‰å€‹æ–¹å¡Šï¼Œè€Œæ£‹ç›¤çš„å…¶ä»–åœ°æ–¹éƒ½æ˜¯ç©ºçš„ã€‚ç¾åœ¨ï¼Œä½ å¯ä»¥é€æ­¥æŠŠä¸€äº›æ–¹å¡Šå¾æ£‹ç›¤çš„é‚Šç•Œï¼Œæ²¿è‘—æ°´å¹³æˆ–å‚ç›´æ–¹å‘**æ»‘å…¥**æ£‹ç›¤ä¸­ã€‚æ”¾å…¥æ£‹ç›¤çš„æ–¹å¡Šæœƒä¸€ç›´æ»‘ï¼Œç›´åˆ°æ’åˆ°æŸå€‹ç¾å­˜æ–¼æ£‹ç›¤ä¸Šçš„æ–¹å¡Šåœæ­¢ã€‚\n\nç¾åœ¨çµ¦ä½ ä¸€å€‹ç›¤é¢ï¼Œå·²çŸ¥ç¬¬ä¸€å¡Šåˆå§‹çš„æ–¹å¡Šä½ç½®ã€‚è«‹å•èƒ½å¦ç”¨æ»‘çš„æ»‘å‡ºé€™å€‹ç›¤é¢ï¼Ÿä¿è­‰è¼¸å…¥çš„ç›¤é¢æ‰€æœ‰æ–¹å¡Šçš„ä½ç½®é€£æ¥æˆä¸€æ£µæ¨¹ï¼šä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœæˆ‘å€‘æŠŠæ–¹å¡Šç•¶ä½œç¯€é»ã€ç·Šé»è‘—é‚Šçš„å…©å€‹æ–¹å¡Šå»ºç«‹ä¸€æ¢é‚Šï¼Œé‚£éº¼æ•´å€‹åœ–æœƒå½¢æˆä¸€æ£µæ¨¹ã€‚\n","roadmap_label_h3":null,"backlink":"/icpcblog-weekly-2019","css_title_theme":null,"css_content_theme":null}}},"pageContext":{}}