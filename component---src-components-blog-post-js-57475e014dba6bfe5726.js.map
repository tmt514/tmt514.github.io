{"version":3,"sources":["webpack:///./src/components/markdown.js","webpack:///./src/components/theorem.js","webpack:///./src/components/include-problem.js","webpack:///./src/components/blog-post.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/display-ui/graph-to-svg.js","webpack:///./src/components/display-ui/anchor-info.js","webpack:///./src/components/display-gadgets/rectangle.js","webpack:///./src/components/display.js","webpack:///./src/images/cc-by-nc-sa.png","webpack:///./src/components/display-array.js","webpack:///./src/components/display-ui/shapes.js","webpack:///./src/components/display-ui/ui-defaults.js","webpack:///./src/components/display-grid.js","webpack:///./src/components/data-helper.js","webpack:///./src/components/algorithm.js","webpack:///./src/components/display-ui/ui-controller.js"],"names":["markdown","unified","use","parse","math","inlineMathDouble","rehype","options","tree","file","visit","node","hasClass","className","properties","includes","isDisplayMath","tagNmae","tagName","value","children","reactRenderer","createElement","React","remarkReactComponents","Theorem","render","val","this","props","content","Array","isArray","processSync","contents","length","react_default","a","c","undefined","title","Component","IncludeProblem","path","show_solution","code","title_prefix","is_inline","inline","notyet","gatsby_browser_entry","query","data","e","pages","edges","filter","frontmatter","page","meta","solution","findH2Contents","regex","i","ret","recording","child","type","match","push","apply","htmlAst","map","idx","astToReact","ukey","childrenReact","Object","assign","key","ojlink","link","href","target","sollink","to","md","description","Fragment","theorem","_2998057797","remark","MyH1","_ref","MyH2","_ref2","MyH3","_ref3","MyCode","_ref4","MySVG","_ref5","width","height","viewbox","viewBox","ShowVariable","varname","Template","componentDidMount","window","MathJax","Hub","Queue","Prism","plugins","customClass","prefix","highlightAll","componentDidUpdate","ShowVariable2","post","markdownRemark","Helmet_default","date","_ShowVariable","_this","call","inheritsLoose_default","rehypeReact","components","h1","h2","h3","display","Display","display-inner","DisplayInner","mysvg","showvariable","algorithm","Algorithm","include-problem","Compiler","style","margin","src","CCBYNCSA","maxWidth","pageQuery","__webpack_require__","r","__webpack_exports__","d","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","Consumer","staticQueryData","Error","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","require","default","ProdPageRenderer","location","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape","defaultNodeProps","id","text","label","font","fontColor","lineHeight","textPadding","minWidth","minHeight","maxHeight","boundingShapeClass","Rectangle","stroke","strokeWidth","strokeLinejoin","strokeLineCap","strokeDasharray","fill","cx","cy","cxAnchor","cyAnchor","leftAnchors","rightAnchors","upAnchors","downAnchors","GraphNodeUIHelper","updateNodePropsByStyleRules","nodeProps","styleRules","classNames","ruleIDs","keys","_i","ruleID","rule","apply_to","z","eval","pure_predicate_fn","updateNodePropsByStyles","styles","updateNodePropsFromUIStore","uiStore","onceStyles","anchorToOffset","info","center","angle","rad","Math","PI","ed","extraDistance","x","y","at","offset","getPeripheralOffsetByAngle","cos","sin","GraphNode","boundingShape","_proto","prototype","updateProps","newProps","updateShape","degree","renderSVG","textLines","split","textLineHeight","defaultLineHeight","textsvgs","startY","textHeight","react__WEBPACK_IMPORTED_MODULE_10___default","dominantBaseline","textAnchor","updateViewBox","GraphEdge","GraphToSVG","nodes","addNode","ID_COUNTER","addEdge","edgeProps","edge","computedNodeCenter","visitedNodes","dfs","finalCX","finalCY","anchorToX","who","anchorToY","cxa","cya","la","ra","ua","da","max","min","console","warn","nodeIDs","renderedNodes","lx","Infinity","ly","rx","ry","w","h","AnchorInfo","Quadrant","_Component","state","clip_id","random","toString","substring","getBoundaryPaths","parseFloat","s","x1","y1","x2","y2","getPath","cos_s","sin_s","cos_e","sin_e","log","join","b","clipPath","array","display_array","grid","display_grid","color","_Component2","arguments","quadrant","rectangle_Quadrant","p","DisplayArray","getDerivedStateFromProps","nextProps","prevState","newState","uiStores","uiStoreFromAlgorithm","JSON","parseInt","ui","nodelist","_loop","forEach","box","getCurrentBoundingRectangle","newNodeProps","fixedwidth","react__WEBPACK_IMPORTED_MODULE_4___default","textWidth","concat","t","getTextWidth","estimatedWidth","estimatedHeight","findActualBox","ctx","hiddenCanvas","document","getContext","measureText","actualWidth","actualHeight","vline","hline","dist","abs","boxWidth","boxHeight","react__WEBPACK_IMPORTED_MODULE_3___default","points","floor","ceil","combineUIHelpers","contentToOptions","_arr","nodeOptions","DisplayGrid","uistore","DataHelper","getDataFromProps","n_row","n_col","repeat","_loop2","j","notext","stringify","react__WEBPACK_IMPORTED_MODULE_7___default","clone","dictionary","findAll","name","findFirst","generator","inputdata","alldisplays","solver","input","UIController","gen","history","next","uiHistory","getSnapshot","clearStyleOnce","displays","stepId","changeStepBy","numMove","done","nextIter","setState","snapshot","uiSnapshot","annotations","react__WEBPACK_IMPORTED_MODULE_5___default","_display__WEBPACK_IMPORTED_MODULE_6__","onClick","bind","setStyle","eraseStyle","setStyleOnce","addStyleRule","rule_id","RULES_COUNTER","removeStyleRule"],"mappings":"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","file":"component---src-components-blog-post-js-57475e014dba6bfe5726.js","sourcesContent":["import React, { Component } from 'react'\nimport unified from 'unified'\nimport parse from 'remark-parse'\nimport math from 'remark-math'\nimport rehype from 'remark-rehype'\nimport reactRenderer from 'rehype-react'\nimport visit from 'unist-util-visit'\n\n\nconst addDollarSignToMath = (options) => {\n    function transformer(tree, file) {\n        visit(tree, 'element', function(node) {\n            const hasClass = (node, className) => {\n                return node.properties.className && node.properties.className.includes(className)\n            }\n            const isDisplayMath = hasClass(node, \"inlineMathDouble\") ||\n            (node.tagNmae === \"div\" && hasClass(node, 'math'))\n            const isInlineMath =\n            node.tagName === \"span\" && hasClass(node, \"inlineMath\") && !isDisplayMath\n            \n            if (isInlineMath) {\n                // handle inline math\n                const value = node.children[0].value\n                node.children[0].value = '$' + value + '$'\n            } else if (isDisplayMath) {\n                // handle display math\n                const value = node.children[0].value\n                node.children[0].value = '$$' + value + '$$'\n            }\n        })\n    }\n    return transformer\n}\n\nconst markdown = unified()\n.use(parse)\n.use(math, {\n    inlineMathDouble: true,\n})\n.use(rehype)\n.use(addDollarSignToMath)\n.use(reactRenderer,\n    {\n        createElement: React.createElement,\n        remarkReactComponents: {\n        },\n    })\n\nexport default markdown;","import React, {Component} from 'react';\n\nimport markdown from './markdown'\n\nclass Theorem extends Component {\n    render() {\n        const val = this.props.children;\n        // This value could be either a string, or a parsed children array from remark.\n        // We do nothing if it's already parsed.\n        var content = val;\n        if (Array.isArray(content) === false) {\n            content = markdown.processSync(val).contents;\n        }\n        if (Array.isArray(content) === true && content.length === 1) {\n            content = markdown.processSync(content[0]).contents;\n        }\n        return (\n        <div className={`message ${this.props.c||\"is-warning\"}`}>\n        {\n            this.props.title !== undefined\n            && (\n                <div className=\"message-header\">\n                {this.props.title}\n                </div>\n            )\n        }\n        <div className=\"message-body\">\n        {content}\n        </div></div>\n        )\n        \n    }\n};\n\nexport default Theorem;","import React, {Component} from 'react'\nimport Theorem from './theorem'\nimport {StaticQuery, graphql, Link} from 'gatsby'\nimport visit from 'unist-util-visit'\n\nimport markdown from './markdown'\n\nconst findH2Contents = (node, regex) => {\n    const { children } = node;\n    const ret = [];\n    var recording = false;\n    \n    var i;\n    for (i = 0; i < children.length; i++) {\n        const child = children[i];\n        if (child.type === \"element\") {\n            if (child.tagName === \"h2\") {\n                if (child.children !== undefined &&\n                    child.children[0] !== undefined &&\n                    child.children[0].value.match(regex) !== null) {\n                    recording = true;\n                    ret.push(child);\n                } else {\n                    recording = false;\n                }\n            } else if (recording === true) {\n                ret.push(child);\n            } else {\n                ret.push(...findH2Contents(child, regex))\n            }\n        } else if (recording === true) {\n            ret.push(child);\n        }\n    }\n    return ret\n}\n\nconst astToReact = (node, ukey) => {\n    const { children } = node;\n    if (node.type === \"text\") return node.value;\n\n    const childrenReact = children.map((c, idx) => astToReact(c, `${ukey}-${idx}`));\n    const props = Object.assign({}, node.properties)\n\n    if (node.tagName === \"h2\") {\n        props.className = (props.className || \"\") + \" title is-4\";\n    }\n    props.key = (props.key||ukey);\n    \n    const reactNode = React.createElement(node.tagName, props, childrenReact);\n    return reactNode;\n}\n\nexport default class IncludeProblem extends Component {\n    render() {\n        const path = this.props.path;\n        const code = this.props.code;\n        const show_solution = (this.props[\"show-solution\"]!== undefined);\n        const title_prefix = (this.props[\"title-prefix\"] || \"例題：\");\n        const is_inline = (this.props.inline !== undefined);\n        \n        if (this.props.notyet !== undefined) {\n            return (<span>{this.props.path} 這題還沒準備好</span>)\n        }\n\n        return (<StaticQuery\n            query={graphql`\n            query allpages {\n                pages: allMarkdownRemark {\n                    edges {\n                        node {   \n                            frontmatter {\n                                title\n                                category\n                                path\n                                date\n                                _PARENT\n                                description\n                                link\n                                code\n                                difficulty\n                                oj\n                            }\n                            htmlAst\n                        }\n                     \n                    }\n                }\n            }`}\n\n            render={(data) => {\n                \n                const e = data.pages.edges.filter((e) => {return e.node.frontmatter.path === path});\n                \n                if (e.length === 0) {\n                    return (<span></span>);\n                }\n                \n                const page = e[0].node;\n                const meta = page.frontmatter;\n                const solution = show_solution === true? \n                    findH2Contents(page.htmlAst, /(題解)|(Solution)/).map((e, idx) => astToReact(e, `T${idx}`))\n                    : \"\";\n                const ojlink = meta.link? (<a href={meta.link} className=\"open-op\" target=\"_blank\">{\" \"}<i className=\"fas fa-external-link-alt\"></i></a>):\"\";\n                const sollink = (<Link to={meta.path} className=\"open-sol\">{\" \"}<i className=\"far fa-lightbulb\"></i></Link>);\n                const md = markdown.processSync(meta.description).contents;\n                \n                // inline mode\n                if (is_inline === true) {\n                    return (<>\n                        <b>{meta.title}</b>\n                        {ojlink}{sollink}{\" \"}\n                        {md}\n                    </>)\n                }\n                // block mode\n                return (<>\n                    <h2 className=\"title is-4\">{title_prefix}{meta.title}{ojlink}</h2>\n                    <Theorem\n                        c=\"is-info\"\n                    >{meta.description}</Theorem>\n                    <p></p>\n                    {solution}\n                    </>\n                    )\n            }}\n            />)\n    }\n} ","import React, { Component } from 'react';\nimport Helmet from 'react-helmet';\nimport {graphql, Link} from 'gatsby';\nimport rehypeReact from 'rehype-react';\nimport Prism from 'prismjs';\n\nimport 'prismjs/plugins/custom-class/prism-custom-class.js';\nimport 'prismjs/components/prism-c.js';\nimport 'prismjs/components/prism-cpp.js';\nimport './prism-tomorrow.css';\n\n\nimport \"bulma/css/bulma.css\"\n\nimport CCBYNCSA from '../images/cc-by-nc-sa.png';\nimport Display, {DisplayInner} from './display';\nimport Theorem from './theorem';\nimport Algorithm from './algorithm';\n\nimport remark from 'remark'\nimport reactRenderer from 'remark-react'\nimport IncludeProblem from './include-problem';\n\nconst markdown = remark()\n  .use(reactRenderer,\n    {\n      createElement: React.createElement,\n      remarkReactComponents: {\n      },\n    })\n\n\nconst MyH1 = ({ children }) => (\n  <h1 className=\"title is-3\">{children}</h1>\n)\nconst MyH2 = ({ children }) => (\n  <h1 className=\"title is-4\">{children}</h1>\n)\nconst MyH3 = ({ children }) => (\n  <h1 className=\"title is-5\">{children}</h1>\n)\n\nconst MyCode = ({ className, children }) => {\n  return (<code className={className}>{children}</code>)\n}\n\nconst MySVG = ({ width, height, viewbox, children }) => {\n  return (<svg width={width} height={height} viewBox={viewbox}>{children}</svg>)\n}\n\nclass ShowVariable extends Component {\n  render() {\n    const frontmatter = this.frontmatter || {};\n    const varname = this.props.varname;\n    const val = frontmatter[varname]\n    return (<div>{markdown.processSync(val).contents}</div>);\n  }\n};\n\nclass Template extends Component {\n  componentDidMount() {\n    window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub])\n    Prism.plugins.customClass.prefix('prism--')\n    Prism.highlightAll();\n  }\n  componentDidUpdate() {\n    window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub])\n    Prism.plugins.customClass.prefix('prism--')\n    Prism.highlightAll();\n  }\n  render() {\n    const data = this.props.data;\n    const post = data.markdownRemark;\n\n    const statefulRenderAst = (frontmatter) => {\n      class ShowVariable2 extends ShowVariable {\n        constructor() {\n          super()\n          this.frontmatter = frontmatter;\n        }\n      }\n      \n      return new rehypeReact({\n        createElement: React.createElement,\n        components: {\n          h1: MyH1,\n          h2: MyH2,\n          h3: MyH3,\n          code: MyCode,\n          display: Display,\n          \"display-inner\": DisplayInner, \n          mysvg: MySVG,\n          showvariable: ShowVariable2,\n          theorem: Theorem,\n          algorithm: Algorithm,\n          \"include-problem\": IncludeProblem,\n        }\n      }).Compiler;\n    }\n\n    return (\n      <div>\n          <Helmet title={`CodeStack - ${post.frontmatter.title}`} />\n          <section className=\"hero is-dark\">\n          <div className=\"hero-body\">\n          <div className=\"container\">\n          <span className=\"is-pulled-right\">\n          <Link to=\"/blog\">\n          <span className=\"icon has-text-warning\">\n            <i className=\"fas fa-lg fa-home\"></i>\n            </span> 返回\n          </Link>\n          </span>\n          <Link to={post.frontmatter.path}>\n          <h1 className=\"title\">{post.frontmatter.title}</h1>\n          <h2 className=\"subtitle\">{post.frontmatter.date}</h2>\n          </Link>\n          </div>\n          </div>\n          </section>\n          <section className=\"section\">\n          <div className=\"container\">\n          <div className=\"content\">\n          { statefulRenderAst(post.frontmatter)(post.htmlAst) }\n          </div>\n          </div>\n          </section>\n          <footer className=\"footer\">\n          <div className=\"content\">\n          <div className=\"is-flex is-vcentered is-centered\">\n          <img style={{height:\"32px\", margin:\"10px\"}} src={ CCBYNCSA } /> \n          <p style={{maxWidth:\"600px\"}}>\n          本文由<b>卡恩</b>(tmt514)撰寫。\n          本站使用 <a href=\"https://www.gatsbyjs.org/\">GasbyJS</a> 搭配 {}\n          <a href=\"https://bulma.io/\">Bulma</a> 製作，其原始碼為 MIT 授權。\n          網站內容除了題源以外，若無特別說明皆為創用 CC-BY-NC-SA 4.0 授權。\n          題源部份若有版權爭議還請與我聯繫，感恩。\n          </p>\n          </div>\n          </div>\n          </footer>\n      </div>\n    );\n  }\n}\nexport default Template;\n\nexport const pageQuery = graphql`\n  query BlogPostByPath($path: String!) {\n    markdownRemark(frontmatter: { path: { eq: $path } }) {\n      htmlAst\n      frontmatter {\n        date(formatString: \"MMMM DD, YYYY\")\n        path\n        title\n        description\n      }\n    }\n  }\n`\n;","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react'\nimport { Rectangle } from './shapes'\nimport { defaultLineHeight } from './ui-defaults'\n\nconst defaultNodeProps = {\n    id: \"dummyID\",\n\n    // Defines contents.\n    text: \"\",\n    label: null,\n    font: \"12pt Roboto\",\n    fontColor: undefined,\n    lineHeight: 16,\n    textPadding: 8,\n\n    // Box Size\n    minWidth: undefined,\n    minHeight: undefined,\n    maxWidth: undefined,\n    maxHeight: undefined,\n\n    // Describes the surrounding shape.\n    boundingShapeClass: Rectangle,\n    stroke: \"black\",\n    strokeWidth: \"1\",\n    strokeLinejoin: \"miter\",\n    strokeLineCap: undefined,\n    strokeDasharray: undefined,\n    fill: \"none\",\n\n    // Handles position.\n    cx: undefined, // X-coordinate for the center.\n    cy: undefined, // Y-coordinate for the center.\n\n    cxAnchor: undefined, // info = { who: \"nodeID\", angle: 0, at: \"center\", extraDistance: 123 }\n    cyAnchor: undefined, // info = { who: \"nodeID\", angle: 0, at: \"boundary\", extraDistance: 123 }\n    leftAnchors: [],\n    rightAnchors: [],\n    upAnchors: [],\n    downAnchors: [],\n    // TODO(tmt514): rotatedAnchors?\n}\n\n// Helper class of functions on updating ui.\nexport class GraphNodeUIHelper {\n    static updateNodePropsByStyleRules(nodeProps, styleRules, classNames) {\n        if (styleRules === undefined) return;\n        const ruleIDs = Object.keys(styleRules);\n        for (let ruleID of ruleIDs) {\n            const rule = styleRules[ruleID];\n            if (classNames.includes(rule.apply_to)) {\n                const z = eval('((' + rule.pure_predicate_fn + ')(nodeProps))');\n                if (z === true) {\n                    Object.assign(nodeProps, rule.options||{});\n                }\n            }\n        }\n    }\n    static updateNodePropsByStyles(nodeProps, styles, id) {\n        if (styles === undefined) return;\n        Object.assign(nodeProps, styles[id]||{});\n    }\n    static updateNodePropsFromUIStore(nodeProps, uiStore, id, classNames) {\n        if (uiStore === undefined) return;\n        \n        // StyleRules\n        GraphNodeUIHelper.updateNodePropsByStyleRules(nodeProps, uiStore.styleRules, classNames);\n        \n        // Styles\n        GraphNodeUIHelper.updateNodePropsByStyles(nodeProps, uiStore.styles, id);\n        \n        // OnceStyles\n        GraphNodeUIHelper.updateNodePropsByStyles(nodeProps, uiStore.onceStyles, id);\n    }\n}\n\n// Helper function to compute anchor to offset.\nfunction anchorToOffset(info, node, center) {\n    var angle = info.angle || 0;\n    var rad = info.angle / 180.0 * Math.PI;\n    var ed = info.extraDistance || 0;\n    \n    var cx = center.x;\n    var cy = center.y;\n    if (info.at === \"boundary\") {\n        const offset = node.getPeripheralOffsetByAngle(angle);\n        cx += offset.x;\n        cy += offset.y;\n    }\n\n    cx += Math.cos(rad) * ed;\n    cy += Math.sin(rad) * ed;\n    return {x:cx, y:cy}\n}\n\nexport class GraphNode {\n    constructor(props) {\n        this.props = Object.assign({}, defaultNodeProps);\n        this.props = Object.assign(this.props, props);\n        this.boundingShape = new this.props.boundingShapeClass(this.props);\n    }\n\n    // Whenever a property changes, the bounding shape needs to be updated.\n    updateProps(newProps) {\n        Object.assign(this.props, newProps);\n        this.boundingShape.updateShape();\n    }\n\n    // Computes the most distant point of the bounding shape on the ray\n    // shooting from the angle.\n    getPeripheralOffsetByAngle(degree) {\n        return this.boundingShape.getPeripheralOffsetByAngle(degree);\n    }\n\n    \n    renderSVG({x, y}) {\n        const cx = x;\n        const cy = y;\n        const textLines = this.props.text.split(\"\\n\").filter((e) => e !== \"\");\n        const textLineHeight = this.props.lineHeight || defaultLineHeight;\n        var textsvgs = []\n        var i;\n        var startY = cy - this.boundingShape.textHeight/2 + textLineHeight/2;\n        for (i = 0; i < textLines.length; i++) {\n            textsvgs.push(<text key={`text-${i}`} x={cx} y={startY}>{textLines[i]}</text>)\n            startY += textLineHeight;\n        }\n        const style = {\n            font: this.props.font,\n            fill: this.props.fontColor,\n        }\n        return (<g key={`n-${this.props.id}`}>\n            <g\n                stroke={this.props.stroke}\n                strokeWidth={this.props.strokeWidth}\n                fill={this.props.fill}>\n                {this.boundingShape.renderSVG({x:cx, y:cy})}\n            </g>\n            <g dominantBaseline=\"central\" textAnchor=\"middle\" style={style}>\n                {textsvgs}\n            </g>\n        </g>)\n    }\n\n    // Visitor pattern...?\n    updateViewBox(viewbox, center) {\n        this.boundingShape.updateViewBox(viewbox, center)\n    }\n    \n};\n\nexport class GraphEdge {\n    constructor(props) {\n        this.props = props;\n    }\n}\n\nclass GraphToSVG {\n    static ID_COUNTER = 0;\n    constructor() {\n        this.nodes = {};\n        this.edges = [];\n    }\n    \n    // Adds a new node to the graph by props, return the node.\n    addNode(nodeProps) {\n        const node = new GraphNode(nodeProps);\n        if (node.props.id === \"dummyID\") {\n            node.props.id = `n-${GraphToSVG.ID_COUNTER}`;\n            GraphToSVG.ID_COUNTER += 1;\n        }\n        this.nodes[node.props.id] = node;\n        return node;\n    }\n\n    // Adds an edge to two existing nodes, return the edge.\n    addEdge(edgeProps) {\n        const edge = new GraphEdge(edgeProps);\n        this.edges.push(edge);\n        return edge;\n    }\n\n    // Returns rendering results wrapped in the <g> tag.\n    renderSVG() {\n        const computedNodeCenter = {}\n        const visitedNodes = {}\n        const dfs = (id) => {\n            const node = this.nodes[id];\n            visitedNodes[id] = true;\n            \n\n            var finalCX = 0;\n            var finalCY = 0;\n\n            const anchorToX = (e) => {\n                if (e === undefined) return undefined;\n                if (visitedNodes[e.who] === undefined) dfs(e.who);\n                return anchorToOffset(e, this.nodes[e.who], computedNodeCenter[e.who]).x;\n            }\n            const anchorToY = (e) => {\n                if (e === undefined) return undefined;\n                if (visitedNodes[e.who] === undefined) dfs(e.who);\n                return anchorToOffset(e, this.nodes[e.who], computedNodeCenter[e.who]).y;\n            }\n\n            const cxa = anchorToX(node.props.cxAnchor)\n            const cya = anchorToY(node.props.cyAnchor)\n            const la = node.props.leftAnchors.map(anchorToX)\n            const ra = node.props.rightAnchors.map(anchorToX)\n            const ua = node.props.upAnchors.map(anchorToY)\n            const da = node.props.downAnchors.map(anchorToY)\n\n            if (node.props.cx !== undefined) {\n                finalCX = node.props.cx;\n            } else if (cxa !== undefined) {\n                finalCX = cxa;\n            } else if (la.length > 0) {\n                finalCX = Math.max(...la) - node.getPeripheralOffsetByAngle(180).x;\n            } else if (ra.length > 0) {\n                finalCX = Math.min(...ra) - node.getPeripheralOffsetByAngle(0).x;\n            } else {\n                console.warn(`Missing X-anchors for node ${node.id}! Treat as zero.`)\n            }\n\n            if (node.props.cy !== undefined) {\n                finalCY = node.props.cy;\n            } else if (cya !== undefined) {\n                finalCY = cya;\n            } else if (da.length > 0) {\n                finalCY = Math.max(...da) - node.getPeripheralOffsetByAngle(270).y;\n            } else if (ua.length > 0) {\n                finalCY = Math.min(...ua) - node.getPeripheralOffsetByAngle(90).y;\n            } else {\n                console.warn(`Missing Y-anchors for node ${node.id}! Treat as zero.`)\n            }\n\n            computedNodeCenter[id] = {x:finalCX, y:finalCY};\n        };\n        \n        var i;\n        const nodeIDs = Object.keys(this.nodes);\n        var renderedNodes = [];\n        var viewbox = {lx: Infinity, ly: Infinity, rx: -Infinity, ry: -Infinity};\n        for (i = 0; i < nodeIDs.length; i++) {\n            if (visitedNodes[nodeIDs[i]] === undefined) {\n                dfs(nodeIDs[i]);\n            }\n        }\n        for (i = 0; i < nodeIDs.length; i++) {\n            var node = this.nodes[nodeIDs[i]];\n            const center = computedNodeCenter[node.props.id];\n            renderedNodes.push(node.renderSVG(center));\n            node.updateViewBox(viewbox, center);\n        }\n        \n        // Adds some paddings.\n        viewbox.lx -= 10;\n        viewbox.ly -= 10;\n        viewbox.rx += 10;\n        viewbox.ry += 10;\n        \n        const w = Math.min(640, viewbox.rx - viewbox.lx);\n        const h = Math.min(480, viewbox.ry - viewbox.ly);\n        \n        return (<svg width={w} height={h} viewBox={`${viewbox.lx} ${viewbox.ly} ${viewbox.rx - viewbox.lx} ${viewbox.ry - viewbox.ly}`}>\n            {renderedNodes}\n        </svg>)\n    }\n};\n\nexport default GraphToSVG;","export default class AnchorInfo {\n    constructor(who, angle, at, extraDistance) {\n        this.who = who;\n        this.angle = angle;\n        this.at = at;\n        this.extraDistance = extraDistance;\n    }\n};\n\n","import React, { Component } from 'react';\n\nexport class Quadrant extends Component {\n    constructor() {\n        super();\n        this.state = {\n            clip_id: \"clip\" + Math.random().toString(36).substring(2),\n        }\n    }\n\n    getBoundaryPaths() {\n        const cx = parseFloat(this.props.x);\n        const cy = parseFloat(this.props.y);\n        var s = this.props[\"angle-start\"];\n        var e = this.props[\"angle-end\"];\n        \n        const r = parseFloat(this.props.r);\n        if (s === undefined) s = 0;\n        if (e === undefined) e = 360;\n        s = parseFloat(s) / 180 * Math.PI;\n        e = parseFloat(e) / 180 * Math.PI;\n        while (e < s) e += 2*Math.PI;\n        \n        const cos_s = Math.cos(s);\n        const sin_s = Math.sin(s);\n        \n        const cos_e = Math.cos(e);\n        const sin_e = Math.sin(e);\n\n        return [\n            {x1: cx, y1: cy, x2: cx+r*cos_s, y2: cy+r*sin_s},\n            {x1: cx, y1: cy, x2: cx+r*cos_e, y2: cy+r*sin_e}\n        ]\n    }\n    \n    getPath() {\n        const cx = parseFloat(this.props.x);\n        const cy = parseFloat(this.props.y);\n        var s = this.props[\"angle-start\"];\n        var e = this.props[\"angle-end\"];\n        \n        const r = parseFloat(this.props.r);\n        if (s === undefined) s = 0;\n        if (e === undefined) e = 360;\n        s = parseFloat(s) / 180 * Math.PI;\n        e = parseFloat(e) / 180 * Math.PI;\n        while (e < s) e += 2*Math.PI;\n        \n        const cos_s = Math.cos(s);\n        const sin_s = Math.sin(s);\n        \n        const cos_e = Math.cos(e);\n        const sin_e = Math.sin(e);\n        \n        console.log(s, e);\n        const largeArcFlag = (e >= s + Math.PI? 1 : 0);\n        \n        const path = [\n            `M ${cx} ${cy}`,\n            `L ${cx+r*cos_s} ${cy+r*sin_s}`,\n            `A ${r} ${r} 0 ${largeArcFlag} 1 ${cx+r*cos_e} ${cy+r*sin_e}`,\n        ];\n        \n        return path.join(\" \");\n    }\n    \n    render() {\n        const d = this.getPath();\n        const b = this.getBoundaryPaths();\n        console.log(d, b);\n        \n        \n        const href = this.props[\"clip-href\"];\n        console.log(this.props.c);\n\n        \n        return (<>\n        <clipPath id={this.state.clip_id}>\n            <use href={href||\"\"} />\n        </clipPath>\n        {\n            this.props[\"boundary-at-start\"] !== undefined &&\n            <line\n                className={`${this.props.c} quadrant boundary start`}\n                {...b[0]}\n                clipPath={`url(#${this.state.clip_id})`}\n            />\n        }\n        {\n            this.props[\"boundary-at-end\"] !== undefined &&\n            <line\n                className={`${this.props.c} quadrant boundary end`}\n                {...b[1]}\n                clipPath={`url(#${this.state.clip_id})`}\n            />\n        }\n        <path\n            className={`${this.props.c} quadrant region`}\n            d={d}\n            clipPath={`url(#${this.state.clip_id})`}\n            />\n        {\n            this.props[\"dot-at-origin\"] !== undefined &&\n            <circle\n                cx={this.props.x} cy={this.props.y}\n                r=\"5\"\n                className={`${this.props.c} quadrant origin`}\n            />\n        }\n        </>)\n    }\n};","import React, {Component} from 'react';\nimport DisplayArray from './display-array';\nimport DisplayGrid from './display-grid';\nimport { Quadrant } from './display-gadgets/rectangle'\n\nclass Display extends Component {\n    render() {\n        if (this.props.array !== undefined) {\n            return (<DisplayArray {...this.props}></DisplayArray>);\n        }\n        if (this.props.grid !== undefined) {\n            return (<DisplayGrid {...this.props}></DisplayGrid>);\n        }\n        \n        \n        return (<div>\n            <span style={{color:\"red\"}}>\n            Error: Displayer of this type Not Implemented.\n            </span>\n        </div>);\n    }\n};\n\nexport class DisplayInner extends Component {\n    // This should be rendered inside some SVG tag.\n    render() {\n        if (this.props.quadrant !== undefined) {\n            return (<Quadrant {...this.props}></Quadrant>);\n        }\n        return (\n        <text fill=\"red\" x=\"0\" y=\"0\">\n            Error: Displayer of this type Not Implemented.\n        </text>\n        );\n    }\n};\n\nexport default Display;","module.exports = __webpack_public_path__ + \"static/cc-by-nc-sa-982c531432c4ad7e8dbf3cf52a1dc6d0.png\";","import React, {Component} from 'react';\nimport GraphToSVG, { GraphNode, GraphNodeUIHelper } from './display-ui/graph-to-svg';\nimport AnchorInfo from './display-ui/anchor-info';\n\nclass DisplayArray extends Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {}\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const newState = Object.assign({}, prevState);\n        const uiStores = [eval(`(` + nextProps.uiStore + `)`), nextProps.uiStoreFromAlgorithm];\n        \n        // TODO(tmt514): find correct way to detect whether to update.\n        if (true) {\n            const data = JSON.parse(nextProps.data);\n            newState.data = data || []\n            newState.n = (nextProps.n && parseInt(nextProps.n)) || data.length\n\n            newState.ui = new GraphToSVG;\n            while (newState.data.length < newState.n) {\n                newState.data.push(\"\")\n            }\n            \n            const nodelist = [];\n            for (let i = 0; i < newState.data.length; i++) {\n                const nodeProps = {\n                    id: `arr-${i}`,\n                    text: `${newState.data[i]}`,\n                    content: newState.data[i],\n                };\n                if (i === 0) {\n                    nodeProps.cx = 0;\n                    nodeProps.cy = 0;\n                } else {\n                    nodeProps.leftAnchors = [new AnchorInfo(`arr-${i-1}`, 0, 'boundary', 0)]\n                    nodeProps.cyAnchor = new AnchorInfo(`arr-${i-1}`, 0, 'center', 0);\n                }\n                \n                // Id corresponds to Index in the array.\n                uiStores.forEach((uiStore) => {\n                    GraphNodeUIHelper.updateNodePropsFromUIStore(nodeProps, uiStore, `${i}`, ['all', 'node'])\n                });\n                \n                const node = newState.ui.addNode(nodeProps);\n                nodelist.push(node);\n            }\n\n            var w = -Infinity;\n            var h = -Infinity;\n            nodelist.forEach((node) => {\n                const box = node.boundingShape.getCurrentBoundingRectangle();\n                w = Math.max(w, box.width);\n                h = Math.max(h, box.height);\n            })\n            \n            const newNodeProps = {\n                minHeight: h,\n            };\n            if (nextProps.fixedwidth !== undefined) {\n                newNodeProps.minWidth = w;\n            }\n            \n            nodelist.forEach((node) => {\n                node.updateProps(newNodeProps)\n            })\n            \n        }\n        \n        return newState;\n    }\n    \n    render() {\n        return (\n            <div className=\"has-text-centered\">\n            {this.state.ui.renderSVG()}\n            </div>\n        )\n    }\n}\n\nexport default DisplayArray;","import React from 'react';\n\nexport class Rectangle {\n\n    static getTextWidth(s, props) {\n        if (typeof window === `undefined`) {\n            return `${s}`.length*7;\n        }\n        var canvas = Rectangle.hiddenCanvas || (Rectangle.hiddenCanvas = window.document.createElement(\"canvas\"))\n        var ctx = canvas.getContext(\"2d\");\n        ctx.font = props.font;\n        return ctx.measureText(`${s}`).width;\n    }\n\n    constructor(props) {\n        this.props = props;\n        \n        const text = props.text;\n\n        this.textLines = text.split(\"\\n\").filter((e) => e !== \"\");\n        this.textWidth = Math.max(0, ...this.textLines.map((t) => Rectangle.getTextWidth(t, props)));\n        this.textHeight = this.textLines.length * props.lineHeight;\n        this.textPadding = props.textPadding;\n        \n        this.estimatedWidth = this.textWidth + this.textPadding*2;\n        this.estimatedHeight = this.textHeight + this.textPadding*2;\n        this.findActualBox();\n    }\n\n    updateShape() {\n        this.findActualBox();\n    }\n\n    getCurrentBoundingRectangle() {\n        return {width: this.actualWidth, height: this.actualHeight}\n    }\n\n    findActualBox() {\n        this.actualWidth = Math.max(this.estimatedWidth, this.props.minWidth||-Infinity)\n        this.actualWidth = Math.min(this.actualWidth, this.props.maxWidth||Infinity)\n        this.actualHeight = Math.max(this.estimatedHeight, this.props.minHeight||-Infinity)\n        this.actualHeight = Math.min(this.actualHeight, this.props.maxHeight||Infinity)\n    }\n\n    getPeripheralOffsetByAngle(degree) {\n        const rad = degree / 180.0 * Math.PI;\n        const c = Math.cos(rad);\n        const s = Math.sin(rad);\n        var vline = this.actualWidth/2;\n        var hline = this.actualHeight/2;\n        vline = (c === 0? Infinity: vline / c);\n        hline = (s === 0? Infinity: hline / s);\n        const dist = Math.min(Math.abs(vline), Math.abs(hline));\n        return {x: c*dist, y: s*dist}\n    }\n\n    renderSVG({x, y}) {\n        const cx = x;\n        const cy = y;\n        var boxWidth = this.actualWidth/2;\n        var boxHeight = this.actualHeight/2;\n        return (<polyline\n            points={`${cx-boxWidth} ${cy-boxHeight}\n                    ${cx+boxWidth} ${cy-boxHeight}\n                    ${cx+boxWidth} ${cy+boxHeight}\n                    ${cx-boxWidth} ${cy+boxHeight}\n                    ${cx-boxWidth} ${cy-boxHeight}`}\n            />)\n    }\n\n    updateViewBox(viewbox, {x, y}) {\n        const cx = x;\n        const cy = y;\n        var boxWidth = this.actualWidth/2;\n        var boxHeight = this.actualHeight/2;\n        var lx = cx-boxWidth;\n        var ly = cy-boxHeight;\n        var rx = cx+boxWidth;\n        var ry = cy+boxHeight;\n        lx = Math.floor(lx);\n        ly = Math.floor(ly);\n        rx = Math.ceil(rx);\n        ry = Math.ceil(ry);\n        \n        viewbox.lx = Math.min(viewbox.lx, lx);\n        viewbox.ly = Math.min(viewbox.ly, ly);\n        viewbox.rx = Math.max(viewbox.rx, rx);\n        viewbox.ry = Math.max(viewbox.ry, ry);\n    }\n};\n","export const defaultLineHeight = 16;","import React, {Component} from 'react';\nimport GraphToSVG, { GraphNode, GraphNodeUIHelper } from './display-ui/graph-to-svg';\nimport AnchorInfo from './display-ui/anchor-info';\nimport DataHelper from './data-helper';\n\n\nfunction combineUIHelpers(props) {\n    const uiStore = {\n        styleRules: {},\n    }\n    const contentToOptions = eval('('+(props[\"uihelper-content-map\"]||\"{}\")+')')\n    for (var content of Object.keys(contentToOptions)) {\n        uiStore.styleRules[`content-rule-${content}`] = {\n            apply_to: 'node',\n            pure_predicate_fn: `(nodeProps) => {return nodeProps.content === '${content}'}`,\n            options: contentToOptions[content],\n        }\n    }\n\n    \n    if (props[\"uihelper-node-style\"] !== undefined) {\n        const nodeOptions = eval('('+(props[\"uihelper-node-style\"]||\"{}\")+')')\n        uiStore.styleRules['all-node-style'] = {\n            apply_to: 'node',\n            pure_predicate_fn: `(nodeProps) => true`,\n            options: nodeOptions,\n        }\n    }\n    return uiStore;\n}\n\nclass DisplayGrid extends Component {\n    constructor() {\n        super();\n        this.state = {};\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const newState = Object.assign({}, prevState);\n        const uiStores = [\n            combineUIHelpers(nextProps),\n            eval(`(` + nextProps.uistore + `)`),\n            nextProps.uiStoreFromAlgorithm];\n\n        const data = DataHelper.getDataFromProps(nextProps);\n        newState.data = data || []\n        newState.n_row = (nextProps.n_row && parseInt(nextProps.n_row)) || data.length\n        newState.n_col = (nextProps.n_col && parseInt(nextProps.n_col)) || (data[0] && data[0].length) || 0\n        \n        newState.ui = new GraphToSVG;\n        while (newState.data.length < newState.n_row) {\n            newState.data.push(\" \".repeat(newState.n_col))\n        } \n        \n        const nodelist = [];\n        for (let i = 0; i < newState.n_row; i++) {\n            for (let j = 0; j < newState.n_col; j++) {\n                const nodeProps = {\n                    id: `grid-${i}-${j}`,\n                    text: `${newState.data[i][j]}`,\n                    content: newState.data[i][j],\n                    font: `12pt Courier New`,\n                    textPadding: 4,\n                    lineHeight: 12,\n                };\n\n                if (nextProps.notext !== undefined) {\n                    nodeProps.text = ``;\n                    nodeProps.textPadding = 10;\n                }\n                \n\n                if (i === 0 && j === 0) {\n                    nodeProps.cx = 0;\n                    nodeProps.cy = 0;\n                } else if (j > 0) {\n                    nodeProps.leftAnchors = [new AnchorInfo(`grid-${i}-${j-1}`, 0, 'boundary', 0)];\n                    nodeProps.cyAnchor = new AnchorInfo(`grid-${i}-${j-1}`, 0, 'center', 0);\n                } else { // i > 0.\n                    nodeProps.downAnchors = [new AnchorInfo(`grid-${i-1}-${j}`, 90, 'boundary', 0)];\n                    nodeProps.cxAnchor = new AnchorInfo(`grid-${i-1}-${j}`, 0, 'center', 0);\n                }\n                // Id corresponds to Coordinates in the array.\n                uiStores.forEach((uiStore) => {\n                    GraphNodeUIHelper.updateNodePropsFromUIStore(nodeProps, uiStore, JSON.stringify([i, j]), ['all', 'node'])\n                });\n                const node = newState.ui.addNode(nodeProps);\n                nodelist.push(node);\n            }\n        }\n        \n        var w = -Infinity;\n        var h = -Infinity;\n        nodelist.forEach((node) => {\n            const box = node.boundingShape.getCurrentBoundingRectangle();\n            w = Math.max(w, box.width);\n            h = Math.max(h, box.height);\n        })\n        \n        h = w = Math.max(w, h);\n        \n        const newNodeProps = {\n            minHeight: h,\n            minWidth: w,\n        };\n            \n        nodelist.forEach((node) => {\n            node.updateProps(newNodeProps)\n        })        \n        return newState;\n    }\n\n    render() {\n        return (\n            <div className=\"has-text-centered\">\n            {this.state.ui.renderSVG()}\n            </div>\n        )\n    }\n}\n\nexport default DisplayGrid;","\n// Helper functions converting different data fields into canonical internal formats.\nclass DataHelper {\n    static getDataFromProps(props) {\n        var data = undefined;\n\n        // The simplest format is a JSON string.\n        if (props.data !== undefined) {\n            if (props.data instanceof Array) {\n                return props.data;\n            }\n            return JSON.parse(props.data);\n        }\n    }\n};\n\nexport default DataHelper;","import React, { Component } from 'react';\nimport Display from './display';\nimport UIController from './display-ui/ui-controller';\n\nconst clone = (dictionary) => {\n    return JSON.parse(JSON.stringify(dictionary))\n}\n\nclass Algorithm extends Component {\n    constructor(props) {\n        super(props);\n        \n        const findAll = function(name) {\n            return props.children.filter((x) => x.type === name);\n        }\n        const findFirst = function(name) {\n            return findAll(name)[0];\n        }\n        const generator = findFirst(\"generator\");\n        const inputdata = findFirst(\"inputdata\");\n        const alldisplays = findAll(\"indirectdisplay\");\n        \n        // function*(input) {}\n        const code = generator\n            .props\n            .children\n            .filter((x) => x.type === \"pre\")[0]\n            .props\n            .children[0];\n        const solver = eval(\"(\" + code + \")\");\n\n        // Parse input.\n        const input = JSON.parse(inputdata.props.data);\n        \n        // Creates UI environment.\n        const ui = new UIController();\n\n        // Creates Generator and history storing all intermediate steps for the\n        // algorithm.\n        var gen = solver(input, ui);\n        var history = [clone(gen.next())];\n        var uiHistory = [ui.getSnapshot()];\n        ui.clearStyleOnce();\n\n        // Set States.\n        this.state = {\n            solver: solver,\n            input: input,\n            displays: alldisplays,\n            generator: gen,\n            stepId: 0,\n            history: history,\n            ui: ui,\n            uiHistory: uiHistory,\n        }\n        \n    }\n\n    changeStepBy(numMove) {\n        const newState = Object.assign({}, this.state);\n        newState.stepId += numMove;\n        while (newState.history.length <= newState.stepId\n            && newState.history[newState.history.length-1].done === false) {\n            const nextIter = newState.generator.next();\n            newState.history.push(clone(nextIter));\n            newState.uiHistory.push(newState.ui.getSnapshot());\n            newState.ui.clearStyleOnce();\n        }\n        newState.stepId = Math.max(0, newState.stepId);\n        newState.stepId = Math.min(newState.history.length-1, newState.stepId);\n        this.setState(newState);\n    }\n\n    render() {\n        const stepId = this.state.stepId;\n        const snapshot = this.state.history[stepId];\n        const uiSnapshot = this.state.uiHistory[stepId];\n        const displays = this.state.displays.map((e, idx) => {\n            const varname = e.props.varname;\n            const uiStore = {\n                styleRules: uiSnapshot.styleRules[varname],\n                styles: uiSnapshot.styles[varname],\n                onceStyles: uiSnapshot.onceStyles[varname],\n                annotations: uiSnapshot.annotations[varname],\n            };\n\n            return (\n                <Display\n                    key={idx}\n                    {...e.props}\n                    uiStoreFromAlgorithm={uiStore}\n                    data={JSON.stringify(snapshot.value[e.props.varname])}\n                />\n        )})\n        return (\n            <div>\n                <div className=\"has-text-centered\">\n                <button onClick={this.changeStepBy.bind(this, -1)}>Prev</button>\n                <span> Step: {this.state.stepId} </span>\n                <button onClick={this.changeStepBy.bind(this, 1)}>Next</button>\n                </div>\n                {displays}\n            </div>\n        )\n    }\n};\n\nexport default Algorithm;","export default class UIController {\n    \n    static RULES_COUNTER = 0;\n    \n    constructor() {\n        this.styleRules = {};\n        this.styles = {};\n        this.onceStyles = {};\n        this.annotations = {};\n    }\n    \n    getSnapshot() {\n        return JSON.parse(JSON.stringify(this));\n    }\n    \n    setStyle(varname, id, options) {\n        if (this.styles[varname] === undefined)\n            this.styles[varname] = {};\n        if (this.styles[varname][id] === undefined)\n            this.styles[varname][id] = {};\n        Object.assign(this.styles[varname][id], options);\n    }\n    \n    eraseStyle(varname, id, options) {\n        if (this.styles[varname] !== undefined)\n            this.styles[varname][id] = undefined;\n    }\n    \n    setStyleOnce(varname, id, options) {\n        if (this.onceStyles[varname] === undefined)\n            this.onceStyles[varname] = {};\n        if (this.onceStyles[varname][id] === undefined)\n            this.onceStyles[varname][id] = {};\n        Object.assign(this.onceStyles[varname][id], options);\n    }\n    \n    clearStyleOnce() {\n        this.onceStyles = {};\n    }\n    \n    addStyleRule(varname, apply_to, pure_predicate_fn, options) {\n        if (this.styleRules[varname] === undefined)\n            this.styleRules[varname] = {}\n        const rule_id = `ui-rule-${UIController.RULES_COUNTER}`;\n        UIController.RULES_COUNTER ++;\n        \n        this.styleRules[varname][rule_id] = {\n            apply_to: apply_to,\n            pure_predicate_fn: pure_predicate_fn.toString(),\n            options: options,\n        };\n        return rule_id;\n    }\n    \n    removeStyleRule(varname, rule_id) {\n        if (this.styleRules[varname] !== undefined) \n            this.styleRules[varname][rule_id] = undefined;\n    }\n    \n       \n};"],"sourceRoot":""}