---
category: "prob"
code: "ICPC-JAKARTA-2018-G"
path: "/problem/icpc/asia_jakarta_2018/G"
title: "Go Make It Complete"
date: '2019-01-04'
difficulty: 5
description: |
    çµ¦å®šä¸€å€‹ç„¡å‘ç°¡å–®åœ– $G$ï¼Œæ‰¾å‡ºæœ€å¤§çš„æ•´æ•¸ $k$ï¼Œä½¿å¾—å­˜åœ¨ä¸€å€‹åŒ…å«æ‰€æœ‰å°šæœªè¢«åŠ å…¥ $G$ çš„é‚Šçš„åºåˆ— $L$ï¼Œä½¿å¾—ä¾åºæŠŠé€™äº›é‚Š $(x, y)$ åŠ å…¥åœ– $G$ çš„ç•¶ä¸‹ï¼Œ$\delta_x+\delta_y \ge k$ã€‚å…¶ä¸­ $\delta_x, \delta_y$ æ˜¯ç•¶ä¸‹é» $x$ å’Œé» $y$ åœ¨åœ– $G$ ä¸Šçš„åº¦æ•¸ã€‚
    
link: "https://codeforces.com/gym/102001/problem/G"
oj: "codeforces-gym"
backlink: "/icpcblog-weekly-2019"
---

## ç°¡åŒ–å¾Œé¡Œç›®æ•˜è¿°

<showvariable varname="description"></showvariable>

## è¼¸å…¥èªªæ˜

è¼¸å…¥çš„ç¬¬ä¸€åˆ—åŒ…å«å…©å€‹æ•´æ•¸ $N, M$ ($2\le N\le 500; 0\le M < \frac{N\times (N-1)}{2}$) ä»£è¡¨é»çš„æ•¸é‡èˆ‡ç¾å­˜çš„é‚Šæ•¸ã€‚æ¥ä¸‹ä¾†çš„ $M$ åˆ—æ¯ä¸€åˆ—åŒ…å«å…©å€‹æ­£æ•´æ•¸ $a_i, b_i$ ($1\le a_i < b_i \le N$) è¡¨ç¤ºä¸€æ¢ç¾å­˜çš„é‚Šã€‚è¼¸å…¥ä¿è­‰ä»»ä½•é…å° $(a_i, b_i)$ åªæœƒå‡ºç¾è‡³å¤šä¸€æ¬¡ã€‚

## è¼¸å‡ºèªªæ˜

è¼¸å‡ºæ‰€æ±‚çš„æ•´æ•¸ $k$ å€¼ã€‚

### ç¯„ä¾‹è¼¸å…¥ 1

```
4 3
1 2
2 3
3 4
```

### ç¯„ä¾‹è¼¸å‡º 1

```
3
```

### ç¯„ä¾‹è¼¸å…¥ 2

```
5 0
```

### ç¯„ä¾‹è¼¸å‡º 2

```
0
```

### ç¯„ä¾‹è¼¸å…¥ 3

```
5 2
1 2
3 4
```

### ç¯„ä¾‹è¼¸å‡º 3

```
2
```

## OJ é€£çµ

* [Codeforces Gym 102001 - G](https://codeforces.com/gym/102001/problem/G)


---

## è§£æ³•

é€™é¡Œå¯ä»¥ç”¨æšèˆ‰æ³•çš„æ¦‚å¿µï¼Œå°æ–¼æ¯ä¸€å€‹ $k$ å€¼åˆ¤æ–·æ˜¯å¦å­˜åœ¨ä¸€å€‹åŠ å…¥é‚Šçš„åºåˆ—æ»¿è¶³æ¢ä»¶ã€‚æ¼”ç®—æ³•å¦‚ä¸‹ï¼š

1. æŠŠæ‰€æœ‰æ»¿è¶³ $\delta_x+\delta_y\ge k$ ä½†ä¸åœ¨åœ–ä¸Šçš„é‚Šè’é›†èµ·ä¾†ï¼ŒåŠ å…¥ä¸€å€‹ä½‡åˆ— $Q$ã€‚
2. åªè¦ä½‡åˆ—éç©ºï¼ŒæŠ“ä¸€æ¢ä½‡åˆ—ä¸­çš„é‚Š $(x, y)$ï¼ŒæŠŠå®ƒåŠ å…¥åœ–ä¸­ï¼›æƒéä¸€æ¬¡æ‰€æœ‰èˆ‡é» $x$ å’Œé» $y$ ç›¸é„°çš„æ‰€æœ‰ä¸åœ¨åœ–ä¸Šçš„é‚Šï¼Œä¸¦åˆ¤æ–·æ˜¯å¦èƒ½å¤ æŠŠå®ƒå€‘åŠ å…¥ä½‡åˆ—ã€‚
3. å¦‚æœæœ€çµ‚æ‰€æœ‰çš„é‚Šéƒ½è¢«åŠ å…¥äº†ä½‡åˆ—ï¼Œå°±ä»£è¡¨é€™å€‹ $k$ å€¼æ˜¯å€‹æˆåŠŸçš„ $k$ å€¼ã€‚åä¹‹å‰‡ä¸è¡Œï¼šåœ¨ä»»æ„æ™‚åˆ»åŠ ä¸é€²ä½‡åˆ—çš„é‚Šæ°¸é åº¦æ•¸å’Œå°æ–¼ $k$ã€‚

ä»¥ä¸Šçš„æ¼”ç®—æ³•çš„ç¬¬ä¸€æ­¥æœƒèŠ± $O(N^2)$ æ™‚é–“æƒéæ‰€æœ‰é»å°ã€‚
ç¬¬äºŒæ­¥å¯èƒ½æœƒè€ƒæ…® $O(N^2)$ å€‹é»å°ã€è€Œæ¯ä¸€æ¢é‚ŠåŠ å…¥å¾ŒæœƒèŠ± $O(N)$ æ™‚é–“æƒéç›¸é„°çš„ä¸åœ¨åœ–ä¸Šçš„é‚Šï¼Œå› æ­¤ç¬¬äºŒæ­¥æ‰€èŠ±æ™‚é–“æ˜¯ $O(N^3)$ã€‚

ä¸é›£ç™¼ç¾åªè¦ $k$ æ˜¯ç­”æ¡ˆï¼Œ$k-1$ ä¹Ÿæœƒæ˜¯ç­”æ¡ˆã€‚æ–¼æ˜¯æˆ‘å€‘å¯ä»¥å° $k$ é€²è¡ŒäºŒåˆ†æœå°‹æ³•ï¼Œæ‰¾åˆ°æ»¿è¶³æ¢ä»¶çš„æœ€å¤§ $k$ å€¼ã€‚æ™‚é–“è¤‡é›œåº¦ $O(N^3\log N)$ã€‚

ä½†äº‹å¯¦ä¸ŠäºŒåˆ†æœå°‹æ³•æ˜¯ä¸å¿…è¦çš„ã€‚å°æ–¼æŸå€‹ $k$ï¼Œè‹¥ç¬¬äºŒæ­¥å®Œæˆå¾Œï¼Œé‚„æœ‰é‚Šæ²’æœ‰è¢«åŠ å…¥åœ–ä¸Šï¼Œé‚£éº¼æˆ‘å€‘æŠŠ $k\gets k-1$ æ™‚ï¼Œå‰›æ‰é‚£äº›å·²ç¶“åŠ å…¥çš„é‚Šï¼Œé¡¯ç„¶å¯ä»¥ä¾ç…§åŒæ¨£é †åºè¢«åŠ å…¥åœ–ä¸Šã€‚å› æ­¤ï¼Œæˆ‘å€‘åªéœ€è¦é‡æ–°å°å‰©ä¸‹çš„é‚Šè·‘éä¸Šè¿°æ¼”ç®—æ³•å³å¯ã€‚æ³¨æ„åˆ°æœ€å¤§å¯èƒ½çš„ $k$ ç‚º $(N-2)+(N-2)$ï¼Œç¬¬ä¸€æ­¥å¯èƒ½è¦é‡æ–°è·‘ $O(N)$ æ¬¡ï¼Œå› æ­¤ç¸½èŠ±è²»æ™‚é–“æ˜¯ $O(N^3)$ï¼Œç¬¬äºŒæ­¥æ¯ä¸€æ¢é‚Šä»ç„¶åªæœƒè¢«åŠ å…¥åˆ°ä½‡åˆ—è‡³å¤šä¸€æ¬¡ï¼Œæ‰€ä»¥ä¹Ÿé‚„æ˜¯ $O(N^3)$ã€‚æˆ‘å€‘å°±å¾—åˆ°ä¸€å€‹ $O(N^3)$ çš„ä¹¾æ·¨ç®—æ³•å•¦ï½

### åƒè€ƒç¨‹å¼ç¢¼

```cpp
#include <algorithm>
#include <iostream>
#include <queue>
using namespace std;

int a[505][505];
int deg[505];

int main() {
  int n, m;
  cin >> n >> m;
  for (int i = 0; i < m; i++) {
    int x, y;
    cin >> x >> y;
    a[x][y] = a[y][x] = 1;
    deg[x]++;
    deg[y]++;
  }
  int k;
  for (k = 2 * (n - 2); k >= 0; k--) {
    queue<pair<int, int>> q;
    // ç¬¬ä¸€æ­¥
    for (int x = 1; x <= n; x++)
      for (int y = x + 1; y <= n; y++)
        if (!a[x][y] && deg[x] + deg[y] >= k) {
          q.push({x, y});
        }
    // ç¬¬äºŒæ­¥
    while (!q.empty()) {
      auto [x, y] = q.front();
      q.pop();
      if (a[x][y]) continue;
      m++;
      a[x][y] = a[y][x] = 1;
      deg[x]++;
      deg[y]++;
      for (int z = 1; z <= n; z++) {
        if (x != z && !a[x][z] && deg[x] + deg[z] >= k) q.push({x, z});
        if (y != z && !a[y][z] && deg[y] + deg[z] >= k) q.push({y, z});
      }
    }
    // ç¬¬ä¸‰æ­¥
    if (m >= n * (n - 1) / 2) break;
  }
  cout << k << endl;
  return 0;
}
```

## å‚™è¨»

å¦‚æœè¦å†å¿«å€‹å¸¸æ•¸å€çš„è©±ï¼ˆå¤§ç´„å…©å€ï¼‰ï¼Œå¯ä»¥æŠŠç¬¬ä¸€æ­¥å¾ˆå¤šä¸å¿…è¦çš„æª¢æŸ¥ç¯€çœèµ·ä¾†ï¼šäº‹å…ˆæŠŠæ‰€æœ‰æ²’åœ¨åœ–ä¸Šçš„é‚Šä¾ç…§ $\delta_x+\delta_y$ çš„å€¼æ”¾åˆ°æŸå€‹é™£åˆ—è£¡é¢ã€‚åœ¨ç¬¬äºŒæ­¥æ›´æ–°çš„ç•¶ä¸‹ï¼Œå¯ä»¥é †ä¾¿æ›´æ–° $(x, z)$ å’Œ $(y, z)$ çš„åº¦æ•¸å’Œã€‚

## Open Question

é€™é¡Œå¦‚æœæŠŠ Queue æ‹¿æ‰ï¼Œè®Šæˆä»¥ä¸‹çš„ code æœƒè®Šå¾—æ›´å¿«ã€‚ä¸æ›‰å¾—æœ‰æ²’æœ‰è¾¦æ³•è­‰æ˜ä¸‹é¢çš„ while loop åªæœƒè·‘ $O(N)$ æ¬¡ï¼Ÿ

```cpp
#include <algorithm>
#include <iostream>
#include <queue>
using namespace std;

int a[505][505];
int deg[505];

int main() {
  int n, m;
  cin >> n >> m;
  
  auto addedge = [&](int x, int y) {
    a[x][y] = a[y][x] = 1;
    deg[x]++;
    deg[y]++;
  };
  for (int i = 0; i < m; i++) {
    int x, y;
    cin >> x >> y;
    addedge(x, y);
  }
  int k = 2 * (n - 2);
  while (m < n * (n - 1) / 2) {
    int v = 0;
    for (int x = 1; x <= n; x++)
      for (int y = x + 1; y <= n; y++)
        if (!a[x][y])
            v = max(v, deg[x] + deg[y]);
    k = min(k, v);
    for (int x = 1; x <= n; x++)
      for (int y = x + 1; y <= n; y++)
        if (!a[x][y] && deg[x] + deg[y] >= k) {
          m++;
          addedge(x, y);
        }
  }
  cout << k << endl;
  return 0;
}
```

### é—œæ–¼ç«¶ç¨‹æ—¥è¨˜

ğŸ… å¦‚æœæ‚¨æƒ³åˆ°æ›´å¤šæœ‰è¶£æ¼‚äº®ç°¡å–®ä¹¾æ·¨çš„è§£æ³•è©±æ­¡è¿ç•™è¨€çµ¦ç«¶ç¨‹æ—¥è¨˜å°ç·¨ç¾¤ï¼

â„¹ï¸ é€™æ˜¯ä¸€ç¯‡æŠ•ç¨¿çµ¦[ç«¶ç¨‹æ—¥è¨˜](https://www.facebook.com/ç«¶ç¨‹æ—¥è¨˜-1514973425463954/)çš„æ–‡ç« ï¼Œæ­¡è¿å¤§å®¶æŠ•ç¨¿ã€äº¤æµèˆ‡åˆ†äº«ç¨‹å¼è§£é¡Œç«¶è³½çš„é»é»æ»´æ»´ï¼