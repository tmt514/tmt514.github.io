{"version":3,"sources":["webpack:///./src/components/markdown.js","webpack:///./src/components/theorem.js","webpack:///./src/components/include-problem.js","webpack:///./src/components/blog-post.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/display-ui/graph-to-svg.js","webpack:///./src/components/display-ui/anchor-info.js","webpack:///./src/components/display-gadgets/rectangle.js","webpack:///./src/components/display.js","webpack:///./src/images/cc-by-nc-sa.png","webpack:///./src/components/display-array.js","webpack:///./src/components/display-ui/shapes.js","webpack:///./src/components/display-ui/ui-defaults.js","webpack:///./src/components/display-grid.js","webpack:///./src/components/data-helper.js","webpack:///./src/components/algorithm.js","webpack:///./src/components/display-ui/ui-controller.js"],"names":["markdown","unified","use","parse","math","inlineMathDouble","rehype","options","tree","file","visit","node","hasClass","className","properties","includes","isDisplayMath","tagNmae","tagName","value","children","reactRenderer","createElement","React","remarkReactComponents","Theorem","render","val","this","props","content","Array","isArray","processSync","contents","length","react_default","a","c","undefined","title","style","justifyContent","Component","IncludeProblem","path","show_solution","code","title_prefix","is_inline","inline","notyet","gatsby_browser_entry","query","data","e","pages","edges","filter","frontmatter","page","meta","solution","findH2Contents","regex","i","ret","recording","child","type","match","push","apply","htmlAst","map","idx","astToReact","ukey","childrenReact","Object","assign","key","ojlink","link","href","target","sollink","to","md","description","Fragment","theorem","_2998057797","remark","MyH1","_ref","MyH2","_ref2","MyH3","_ref3","MyCode","_ref4","MySVG","_ref5","width","height","viewbox","viewBox","ShowVariable","varname","Template","componentDidMount","window","MathJax","Hub","Queue","Prism","plugins","customClass","prefix","highlightAll","componentDidUpdate","ShowVariable2","post","markdownRemark","Helmet_default","date","_ShowVariable","_this","call","inheritsLoose_default","rehypeReact","components","h1","h2","h3","display","Display","display-inner","DisplayInner","mysvg","showvariable","algorithm","Algorithm","include-problem","Compiler","margin","src","CCBYNCSA","maxWidth","pageQuery","__webpack_require__","r","__webpack_exports__","d","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","Consumer","staticQueryData","Error","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","require","default","ProdPageRenderer","location","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape","defaultNodeProps","id","text","label","font","fontColor","lineHeight","textPadding","minWidth","minHeight","maxHeight","boundingShapeClass","Rectangle","stroke","strokeWidth","strokeLinejoin","strokeLineCap","strokeDasharray","fill","cx","cy","cxAnchor","cyAnchor","leftAnchors","rightAnchors","upAnchors","downAnchors","GraphNodeUIHelper","updateNodePropsByStyleRules","nodeProps","styleRules","classNames","ruleIDs","keys","_i","ruleID","rule","apply_to","z","eval","pure_predicate_fn","updateNodePropsByStyles","styles","updateNodePropsFromUIStore","uiStore","onceStyles","anchorToOffset","info","center","angle","rad","Math","PI","ed","extraDistance","x","y","at","offset","getPeripheralOffsetByAngle","cos","sin","GraphNode","boundingShape","_proto","prototype","updateProps","newProps","updateShape","degree","renderSVG","textLines","split","textLineHeight","defaultLineHeight","textsvgs","startY","textHeight","react__WEBPACK_IMPORTED_MODULE_10___default","dominantBaseline","textAnchor","updateViewBox","GraphEdge","GraphToSVG","nodes","addNode","ID_COUNTER","addEdge","edgeProps","edge","computedNodeCenter","visitedNodes","dfs","finalCX","finalCY","anchorToX","who","anchorToY","cxa","cya","la","ra","ua","da","max","min","console","warn","nodeIDs","renderedNodes","lx","Infinity","ly","rx","ry","w","h","AnchorInfo","Quadrant","_Component","state","clip_id","random","toString","substring","getBoundaryPaths","parseFloat","s","x1","y1","x2","y2","getPath","cos_s","sin_s","cos_e","sin_e","log","join","b","clipPath","array","display_array","grid","display_grid","color","_Component2","arguments","quadrant","rectangle_Quadrant","p","DisplayArray","getDerivedStateFromProps","nextProps","prevState","newState","uiStores","uiStoreFromAlgorithm","JSON","parseInt","ui","nodelist","_loop","forEach","box","getCurrentBoundingRectangle","newNodeProps","fixedwidth","react__WEBPACK_IMPORTED_MODULE_4___default","textWidth","concat","t","getTextWidth","estimatedWidth","estimatedHeight","findActualBox","ctx","hiddenCanvas","document","getContext","measureText","actualWidth","actualHeight","vline","hline","dist","abs","boxWidth","boxHeight","react__WEBPACK_IMPORTED_MODULE_3___default","points","floor","ceil","combineUIHelpers","contentToOptions","_arr","nodeOptions","DisplayGrid","uistore","DataHelper","getDataFromProps","n_row","n_col","repeat","_loop2","j","notext","stringify","react__WEBPACK_IMPORTED_MODULE_7___default","clone","dictionary","findAll","name","findFirst","generator","inputdata","alldisplays","solver","input","UIController","gen","history","next","uiHistory","getSnapshot","clearStyleOnce","displays","stepId","changeStepBy","numMove","done","nextIter","setState","snapshot","uiSnapshot","annotations","react__WEBPACK_IMPORTED_MODULE_5___default","_display__WEBPACK_IMPORTED_MODULE_6__","onClick","bind","setStyle","eraseStyle","setStyleOnce","addStyleRule","rule_id","RULES_COUNTER","removeStyleRule"],"mappings":"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","file":"component---src-components-blog-post-js-92d6d95a28b779ea6712.js","sourcesContent":["import React, { Component } from 'react'\nimport unified from 'unified'\nimport parse from 'remark-parse'\nimport math from 'remark-math'\nimport rehype from 'remark-rehype'\nimport reactRenderer from 'rehype-react'\nimport visit from 'unist-util-visit'\n\n\nconst addDollarSignToMath = (options) => {\n    function transformer(tree, file) {\n        visit(tree, 'element', function(node) {\n            const hasClass = (node, className) => {\n                return node.properties.className && node.properties.className.includes(className)\n            }\n            const isDisplayMath = hasClass(node, \"inlineMathDouble\") ||\n            (node.tagNmae === \"div\" && hasClass(node, 'math'))\n            const isInlineMath =\n            node.tagName === \"span\" && hasClass(node, \"inlineMath\") && !isDisplayMath\n            \n            if (isInlineMath) {\n                // handle inline math\n                const value = node.children[0].value\n                node.children[0].value = '$' + value + '$'\n            } else if (isDisplayMath) {\n                // handle display math\n                const value = node.children[0].value\n                node.children[0].value = '$$' + value + '$$'\n            }\n        })\n    }\n    return transformer\n}\n\nconst markdown = unified()\n.use(parse)\n.use(math, {\n    inlineMathDouble: true,\n})\n.use(rehype)\n.use(addDollarSignToMath)\n.use(reactRenderer,\n    {\n        createElement: React.createElement,\n        remarkReactComponents: {\n        },\n    })\n\nexport default markdown;","import React, {Component} from 'react';\n\nimport markdown from './markdown'\n\nclass Theorem extends Component {\n    render() {\n        const val = this.props.children;\n        // This value could be either a string, or a parsed children array from remark.\n        // We do nothing if it's already parsed.\n        var content = val;\n        if (Array.isArray(content) === false) {\n            content = markdown.processSync(val).contents;\n        }\n        if (Array.isArray(content) === true && content.length === 1) {\n            content = markdown.processSync(content[0]).contents;\n        }\n        return (\n        <div className={`message ${this.props.c||\"is-warning\"}`}>\n        {\n            this.props.title !== undefined\n            && (\n                <div className=\"message-header\" style={{justifyContent: 'flex-start'}}>\n                {this.props.title}\n                </div>\n            )\n        }\n        <div className=\"message-body\">\n        {content}\n        </div></div>\n        )\n        \n    }\n};\n\nexport default Theorem;","import React, {Component} from 'react'\nimport Theorem from './theorem'\nimport {StaticQuery, graphql, Link} from 'gatsby'\nimport visit from 'unist-util-visit'\n\nimport markdown from './markdown'\n\nconst findH2Contents = (node, regex) => {\n    const { children } = node;\n    const ret = [];\n    var recording = false;\n    \n    var i;\n    for (i = 0; i < children.length; i++) {\n        const child = children[i];\n        if (child.type === \"element\") {\n            if (child.tagName === \"h2\") {\n                if (child.children !== undefined &&\n                    child.children[0] !== undefined &&\n                    child.children[0].value.match(regex) !== null) {\n                    recording = true;\n                    ret.push(child);\n                } else {\n                    recording = false;\n                }\n            } else if (recording === true) {\n                ret.push(child);\n            } else {\n                ret.push(...findH2Contents(child, regex))\n            }\n        } else if (recording === true) {\n            ret.push(child);\n        }\n    }\n    return ret\n}\n\nconst astToReact = (node, ukey) => {\n    const { children } = node;\n    if (node.type === \"text\") return node.value;\n\n    const childrenReact = children.map((c, idx) => astToReact(c, `${ukey}-${idx}`));\n    const props = Object.assign({}, node.properties)\n\n    if (node.tagName === \"h2\") {\n        props.className = (props.className || \"\") + \" title is-4\";\n    }\n    props.key = (props.key||ukey);\n    \n    const reactNode = React.createElement(node.tagName, props, childrenReact);\n    return reactNode;\n}\n\nexport default class IncludeProblem extends Component {\n    render() {\n        const path = this.props.path;\n        const code = this.props.code;\n        const show_solution = (this.props[\"show-solution\"]!== undefined);\n        const title_prefix = (this.props[\"title-prefix\"] || \"例題：\");\n        const is_inline = (this.props.inline !== undefined);\n        \n        if (this.props.notyet !== undefined) {\n            return (<span>{this.props.path} 這題還沒準備好</span>)\n        }\n\n        return (<StaticQuery\n            query={graphql`\n            query allpages {\n                pages: allMarkdownRemark {\n                    edges {\n                        node {   \n                            frontmatter {\n                                title\n                                category\n                                path\n                                date\n                                _PARENT\n                                description\n                                link\n                                code\n                                difficulty\n                                oj\n                            }\n                            htmlAst\n                        }\n                     \n                    }\n                }\n            }`}\n\n            render={(data) => {\n                \n                const e = data.pages.edges.filter((e) => {return e.node.frontmatter.path === path});\n                \n                if (e.length === 0) {\n                    return (<span></span>);\n                }\n                \n                const page = e[0].node;\n                const meta = page.frontmatter;\n                const solution = show_solution === true? \n                    findH2Contents(page.htmlAst, /(題解)|(Solution)/).map((e, idx) => astToReact(e, `T${idx}`))\n                    : \"\";\n                const ojlink = meta.link? (<a href={meta.link} className=\"open-op\" target=\"_blank\">{\" \"}<i className=\"fas fa-external-link-alt\"></i></a>):\"\";\n                const sollink = (<Link to={meta.path} className=\"open-sol\">{\" \"}<i className=\"far fa-lightbulb\"></i></Link>);\n                const md = markdown.processSync(meta.description).contents;\n                \n                // inline mode\n                if (is_inline === true) {\n                    return (<>\n                        <b>{meta.title}</b>\n                        {ojlink}{sollink}{\" \"}\n                        {md}\n                    </>)\n                }\n                // block mode\n                return (<>\n                    <h2 className=\"title is-4\">{title_prefix}{meta.title}{ojlink}</h2>\n                    <Theorem\n                        c=\"is-info\"\n                    >{meta.description}</Theorem>\n                    <p></p>\n                    {solution}\n                    </>\n                    )\n            }}\n            />)\n    }\n} ","import React, { Component } from 'react';\nimport Helmet from 'react-helmet';\nimport {graphql, Link} from 'gatsby';\nimport rehypeReact from 'rehype-react';\nimport Prism from 'prismjs';\n\nimport 'prismjs/plugins/custom-class/prism-custom-class.js';\nimport 'prismjs/components/prism-c.js';\nimport 'prismjs/components/prism-cpp.js';\nimport './prism-tomorrow.css';\n\n\nimport \"bulma/css/bulma.css\"\n\nimport CCBYNCSA from '../images/cc-by-nc-sa.png';\nimport Display, {DisplayInner} from './display';\nimport Theorem from './theorem';\nimport Algorithm from './algorithm';\n\nimport remark from 'remark'\nimport reactRenderer from 'remark-react'\nimport IncludeProblem from './include-problem';\n\nconst markdown = remark()\n  .use(reactRenderer,\n    {\n      createElement: React.createElement,\n      remarkReactComponents: {\n      },\n    })\n\n\nconst MyH1 = ({ children }) => (\n  <h1 className=\"title is-3\">{children}</h1>\n)\nconst MyH2 = ({ children }) => (\n  <h1 className=\"title is-4\">{children}</h1>\n)\nconst MyH3 = ({ children }) => (\n  <h1 className=\"title is-5\">{children}</h1>\n)\n\nconst MyCode = ({ className, children }) => {\n  return (<code className={className}>{children}</code>)\n}\n\nconst MySVG = ({ width, height, viewbox, children }) => {\n  return (<svg width={width} height={height} viewBox={viewbox}>{children}</svg>)\n}\n\nclass ShowVariable extends Component {\n  render() {\n    const frontmatter = this.frontmatter || {};\n    const varname = this.props.varname;\n    const val = frontmatter[varname]\n    return (<div>{markdown.processSync(val).contents}</div>);\n  }\n};\n\nclass Template extends Component {\n  componentDidMount() {\n    window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub])\n    Prism.plugins.customClass.prefix('prism--')\n    Prism.highlightAll();\n  }\n  componentDidUpdate() {\n    window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub])\n    Prism.plugins.customClass.prefix('prism--')\n    Prism.highlightAll();\n  }\n  render() {\n    const data = this.props.data;\n    const post = data.markdownRemark;\n\n    const statefulRenderAst = (frontmatter) => {\n      class ShowVariable2 extends ShowVariable {\n        constructor() {\n          super()\n          this.frontmatter = frontmatter;\n        }\n      }\n      \n      return new rehypeReact({\n        createElement: React.createElement,\n        components: {\n          h1: MyH1,\n          h2: MyH2,\n          h3: MyH3,\n          code: MyCode,\n          display: Display,\n          \"display-inner\": DisplayInner, \n          mysvg: MySVG,\n          showvariable: ShowVariable2,\n          theorem: Theorem,\n          algorithm: Algorithm,\n          \"include-problem\": IncludeProblem,\n        }\n      }).Compiler;\n    }\n\n    return (\n      <div>\n          <Helmet title={`CodeStack - ${post.frontmatter.title}`} />\n          <section className=\"hero is-dark\">\n          <div className=\"hero-body\">\n          <div className=\"container\">\n          <span className=\"is-pulled-right\">\n          <Link to=\"/blog\">\n          <span className=\"icon has-text-warning\">\n            <i className=\"fas fa-lg fa-home\"></i>\n            </span> 返回\n          </Link>\n          </span>\n          <Link to={post.frontmatter.path}>\n          <h1 className=\"title\">{post.frontmatter.title}</h1>\n          <h2 className=\"subtitle\">{post.frontmatter.date}</h2>\n          </Link>\n          </div>\n          </div>\n          </section>\n          <section className=\"section\">\n          <div className=\"container\">\n          <div className=\"content\">\n          { statefulRenderAst(post.frontmatter)(post.htmlAst) }\n          </div>\n          </div>\n          </section>\n          <footer className=\"footer\">\n          <div className=\"content\">\n          <div className=\"is-flex is-vcentered is-centered\">\n          <img style={{height:\"32px\", margin:\"10px\"}} src={ CCBYNCSA } /> \n          <p style={{maxWidth:\"600px\"}}>\n          本文由<b>卡恩</b>(tmt514)撰寫。\n          本站使用 <a href=\"https://www.gatsbyjs.org/\">GasbyJS</a> 搭配 {}\n          <a href=\"https://bulma.io/\">Bulma</a> 製作，其原始碼為 MIT 授權。\n          網站內容除了題源以外，若無特別說明皆為創用 CC-BY-NC-SA 4.0 授權。\n          題源部份若有版權爭議還請與我聯繫，感恩。\n          </p>\n          </div>\n          </div>\n          </footer>\n      </div>\n    );\n  }\n}\nexport default Template;\n\nexport const pageQuery = graphql`\n  query BlogPostByPath($path: String!) {\n    markdownRemark(frontmatter: { path: { eq: $path } }) {\n      htmlAst\n      frontmatter {\n        date(formatString: \"MMMM DD, YYYY\")\n        path\n        title\n        description\n      }\n    }\n  }\n`\n;","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react'\nimport { Rectangle } from './shapes'\nimport { defaultLineHeight } from './ui-defaults'\n\nconst defaultNodeProps = {\n    id: \"dummyID\",\n\n    // Defines contents.\n    text: \"\",\n    label: null,\n    font: \"12pt Roboto\",\n    fontColor: undefined,\n    lineHeight: 16,\n    textPadding: 8,\n\n    // Box Size\n    minWidth: undefined,\n    minHeight: undefined,\n    maxWidth: undefined,\n    maxHeight: undefined,\n\n    // Describes the surrounding shape.\n    boundingShapeClass: Rectangle,\n    stroke: \"black\",\n    strokeWidth: \"1\",\n    strokeLinejoin: \"miter\",\n    strokeLineCap: undefined,\n    strokeDasharray: undefined,\n    fill: \"none\",\n\n    // Handles position.\n    cx: undefined, // X-coordinate for the center.\n    cy: undefined, // Y-coordinate for the center.\n\n    cxAnchor: undefined, // info = { who: \"nodeID\", angle: 0, at: \"center\", extraDistance: 123 }\n    cyAnchor: undefined, // info = { who: \"nodeID\", angle: 0, at: \"boundary\", extraDistance: 123 }\n    leftAnchors: [],\n    rightAnchors: [],\n    upAnchors: [],\n    downAnchors: [],\n    // TODO(tmt514): rotatedAnchors?\n}\n\n// Helper class of functions on updating ui.\nexport class GraphNodeUIHelper {\n    static updateNodePropsByStyleRules(nodeProps, styleRules, classNames) {\n        if (styleRules === undefined) return;\n        const ruleIDs = Object.keys(styleRules);\n        for (let ruleID of ruleIDs) {\n            const rule = styleRules[ruleID];\n            if (classNames.includes(rule.apply_to)) {\n                const z = eval('((' + rule.pure_predicate_fn + ')(nodeProps))');\n                if (z === true) {\n                    Object.assign(nodeProps, rule.options||{});\n                }\n            }\n        }\n    }\n    static updateNodePropsByStyles(nodeProps, styles, id) {\n        if (styles === undefined) return;\n        Object.assign(nodeProps, styles[id]||{});\n    }\n    static updateNodePropsFromUIStore(nodeProps, uiStore, id, classNames) {\n        if (uiStore === undefined) return;\n        \n        // StyleRules\n        GraphNodeUIHelper.updateNodePropsByStyleRules(nodeProps, uiStore.styleRules, classNames);\n        \n        // Styles\n        GraphNodeUIHelper.updateNodePropsByStyles(nodeProps, uiStore.styles, id);\n        \n        // OnceStyles\n        GraphNodeUIHelper.updateNodePropsByStyles(nodeProps, uiStore.onceStyles, id);\n    }\n}\n\n// Helper function to compute anchor to offset.\nfunction anchorToOffset(info, node, center) {\n    var angle = info.angle || 0;\n    var rad = info.angle / 180.0 * Math.PI;\n    var ed = info.extraDistance || 0;\n    \n    var cx = center.x;\n    var cy = center.y;\n    if (info.at === \"boundary\") {\n        const offset = node.getPeripheralOffsetByAngle(angle);\n        cx += offset.x;\n        cy += offset.y;\n    }\n\n    cx += Math.cos(rad) * ed;\n    cy += Math.sin(rad) * ed;\n    return {x:cx, y:cy}\n}\n\nexport class GraphNode {\n    constructor(props) {\n        this.props = Object.assign({}, defaultNodeProps);\n        this.props = Object.assign(this.props, props);\n        this.boundingShape = new this.props.boundingShapeClass(this.props);\n    }\n\n    // Whenever a property changes, the bounding shape needs to be updated.\n    updateProps(newProps) {\n        Object.assign(this.props, newProps);\n        this.boundingShape.updateShape();\n    }\n\n    // Computes the most distant point of the bounding shape on the ray\n    // shooting from the angle.\n    getPeripheralOffsetByAngle(degree) {\n        return this.boundingShape.getPeripheralOffsetByAngle(degree);\n    }\n\n    \n    renderSVG({x, y}) {\n        const cx = x;\n        const cy = y;\n        const textLines = this.props.text.split(\"\\n\").filter((e) => e !== \"\");\n        const textLineHeight = this.props.lineHeight || defaultLineHeight;\n        var textsvgs = []\n        var i;\n        var startY = cy - this.boundingShape.textHeight/2 + textLineHeight/2;\n        for (i = 0; i < textLines.length; i++) {\n            textsvgs.push(<text key={`text-${i}`} x={cx} y={startY}>{textLines[i]}</text>)\n            startY += textLineHeight;\n        }\n        const style = {\n            font: this.props.font,\n            fill: this.props.fontColor,\n        }\n        return (<g key={`n-${this.props.id}`}>\n            <g\n                stroke={this.props.stroke}\n                strokeWidth={this.props.strokeWidth}\n                fill={this.props.fill}>\n                {this.boundingShape.renderSVG({x:cx, y:cy})}\n            </g>\n            <g dominantBaseline=\"central\" textAnchor=\"middle\" style={style}>\n                {textsvgs}\n            </g>\n        </g>)\n    }\n\n    // Visitor pattern...?\n    updateViewBox(viewbox, center) {\n        this.boundingShape.updateViewBox(viewbox, center)\n    }\n    \n};\n\nexport class GraphEdge {\n    constructor(props) {\n        this.props = props;\n    }\n}\n\nclass GraphToSVG {\n    static ID_COUNTER = 0;\n    constructor() {\n        this.nodes = {};\n        this.edges = [];\n    }\n    \n    // Adds a new node to the graph by props, return the node.\n    addNode(nodeProps) {\n        const node = new GraphNode(nodeProps);\n        if (node.props.id === \"dummyID\") {\n            node.props.id = `n-${GraphToSVG.ID_COUNTER}`;\n            GraphToSVG.ID_COUNTER += 1;\n        }\n        this.nodes[node.props.id] = node;\n        return node;\n    }\n\n    // Adds an edge to two existing nodes, return the edge.\n    addEdge(edgeProps) {\n        const edge = new GraphEdge(edgeProps);\n        this.edges.push(edge);\n        return edge;\n    }\n\n    // Returns rendering results wrapped in the <g> tag.\n    renderSVG() {\n        const computedNodeCenter = {}\n        const visitedNodes = {}\n        const dfs = (id) => {\n            const node = this.nodes[id];\n            visitedNodes[id] = true;\n            \n\n            var finalCX = 0;\n            var finalCY = 0;\n\n            const anchorToX = (e) => {\n                if (e === undefined) return undefined;\n                if (visitedNodes[e.who] === undefined) dfs(e.who);\n                return anchorToOffset(e, this.nodes[e.who], computedNodeCenter[e.who]).x;\n            }\n            const anchorToY = (e) => {\n                if (e === undefined) return undefined;\n                if (visitedNodes[e.who] === undefined) dfs(e.who);\n                return anchorToOffset(e, this.nodes[e.who], computedNodeCenter[e.who]).y;\n            }\n\n            const cxa = anchorToX(node.props.cxAnchor)\n            const cya = anchorToY(node.props.cyAnchor)\n            const la = node.props.leftAnchors.map(anchorToX)\n            const ra = node.props.rightAnchors.map(anchorToX)\n            const ua = node.props.upAnchors.map(anchorToY)\n            const da = node.props.downAnchors.map(anchorToY)\n\n            if (node.props.cx !== undefined) {\n                finalCX = node.props.cx;\n            } else if (cxa !== undefined) {\n                finalCX = cxa;\n            } else if (la.length > 0) {\n                finalCX = Math.max(...la) - node.getPeripheralOffsetByAngle(180).x;\n            } else if (ra.length > 0) {\n                finalCX = Math.min(...ra) - node.getPeripheralOffsetByAngle(0).x;\n            } else {\n                console.warn(`Missing X-anchors for node ${node.id}! Treat as zero.`)\n            }\n\n            if (node.props.cy !== undefined) {\n                finalCY = node.props.cy;\n            } else if (cya !== undefined) {\n                finalCY = cya;\n            } else if (da.length > 0) {\n                finalCY = Math.max(...da) - node.getPeripheralOffsetByAngle(270).y;\n            } else if (ua.length > 0) {\n                finalCY = Math.min(...ua) - node.getPeripheralOffsetByAngle(90).y;\n            } else {\n                console.warn(`Missing Y-anchors for node ${node.id}! Treat as zero.`)\n            }\n\n            computedNodeCenter[id] = {x:finalCX, y:finalCY};\n        };\n        \n        var i;\n        const nodeIDs = Object.keys(this.nodes);\n        var renderedNodes = [];\n        var viewbox = {lx: Infinity, ly: Infinity, rx: -Infinity, ry: -Infinity};\n        for (i = 0; i < nodeIDs.length; i++) {\n            if (visitedNodes[nodeIDs[i]] === undefined) {\n                dfs(nodeIDs[i]);\n            }\n        }\n        for (i = 0; i < nodeIDs.length; i++) {\n            var node = this.nodes[nodeIDs[i]];\n            const center = computedNodeCenter[node.props.id];\n            renderedNodes.push(node.renderSVG(center));\n            node.updateViewBox(viewbox, center);\n        }\n        \n        // Adds some paddings.\n        viewbox.lx -= 10;\n        viewbox.ly -= 10;\n        viewbox.rx += 10;\n        viewbox.ry += 10;\n        \n        const w = Math.min(640, viewbox.rx - viewbox.lx);\n        const h = Math.min(480, viewbox.ry - viewbox.ly);\n        \n        return (<svg width={w} height={h} viewBox={`${viewbox.lx} ${viewbox.ly} ${viewbox.rx - viewbox.lx} ${viewbox.ry - viewbox.ly}`}>\n            {renderedNodes}\n        </svg>)\n    }\n};\n\nexport default GraphToSVG;","export default class AnchorInfo {\n    constructor(who, angle, at, extraDistance) {\n        this.who = who;\n        this.angle = angle;\n        this.at = at;\n        this.extraDistance = extraDistance;\n    }\n};\n\n","import React, { Component } from 'react';\n\nexport class Quadrant extends Component {\n    constructor() {\n        super();\n        this.state = {\n            clip_id: \"clip\" + Math.random().toString(36).substring(2),\n        }\n    }\n\n    getBoundaryPaths() {\n        const cx = parseFloat(this.props.x);\n        const cy = parseFloat(this.props.y);\n        var s = this.props[\"angle-start\"];\n        var e = this.props[\"angle-end\"];\n        \n        const r = parseFloat(this.props.r);\n        if (s === undefined) s = 0;\n        if (e === undefined) e = 360;\n        s = parseFloat(s) / 180 * Math.PI;\n        e = parseFloat(e) / 180 * Math.PI;\n        while (e < s) e += 2*Math.PI;\n        \n        const cos_s = Math.cos(s);\n        const sin_s = Math.sin(s);\n        \n        const cos_e = Math.cos(e);\n        const sin_e = Math.sin(e);\n\n        return [\n            {x1: cx, y1: cy, x2: cx+r*cos_s, y2: cy+r*sin_s},\n            {x1: cx, y1: cy, x2: cx+r*cos_e, y2: cy+r*sin_e}\n        ]\n    }\n    \n    getPath() {\n        const cx = parseFloat(this.props.x);\n        const cy = parseFloat(this.props.y);\n        var s = this.props[\"angle-start\"];\n        var e = this.props[\"angle-end\"];\n        \n        const r = parseFloat(this.props.r);\n        if (s === undefined) s = 0;\n        if (e === undefined) e = 360;\n        s = parseFloat(s) / 180 * Math.PI;\n        e = parseFloat(e) / 180 * Math.PI;\n        while (e < s) e += 2*Math.PI;\n        \n        const cos_s = Math.cos(s);\n        const sin_s = Math.sin(s);\n        \n        const cos_e = Math.cos(e);\n        const sin_e = Math.sin(e);\n        \n        console.log(s, e);\n        const largeArcFlag = (e >= s + Math.PI? 1 : 0);\n        \n        const path = [\n            `M ${cx} ${cy}`,\n            `L ${cx+r*cos_s} ${cy+r*sin_s}`,\n            `A ${r} ${r} 0 ${largeArcFlag} 1 ${cx+r*cos_e} ${cy+r*sin_e}`,\n        ];\n        \n        return path.join(\" \");\n    }\n    \n    render() {\n        const d = this.getPath();\n        const b = this.getBoundaryPaths();\n        console.log(d, b);\n        \n        \n        const href = this.props[\"clip-href\"];\n        console.log(this.props.c);\n\n        \n        return (<>\n        <clipPath id={this.state.clip_id}>\n            <use href={href||\"\"} />\n        </clipPath>\n        {\n            this.props[\"boundary-at-start\"] !== undefined &&\n            <line\n                className={`${this.props.c} quadrant boundary start`}\n                {...b[0]}\n                clipPath={`url(#${this.state.clip_id})`}\n            />\n        }\n        {\n            this.props[\"boundary-at-end\"] !== undefined &&\n            <line\n                className={`${this.props.c} quadrant boundary end`}\n                {...b[1]}\n                clipPath={`url(#${this.state.clip_id})`}\n            />\n        }\n        <path\n            className={`${this.props.c} quadrant region`}\n            d={d}\n            clipPath={`url(#${this.state.clip_id})`}\n            />\n        {\n            this.props[\"dot-at-origin\"] !== undefined &&\n            <circle\n                cx={this.props.x} cy={this.props.y}\n                r=\"5\"\n                className={`${this.props.c} quadrant origin`}\n            />\n        }\n        </>)\n    }\n};","import React, {Component} from 'react';\nimport DisplayArray from './display-array';\nimport DisplayGrid from './display-grid';\nimport { Quadrant } from './display-gadgets/rectangle'\n\nclass Display extends Component {\n    render() {\n        if (this.props.array !== undefined) {\n            return (<DisplayArray {...this.props}></DisplayArray>);\n        }\n        if (this.props.grid !== undefined) {\n            return (<DisplayGrid {...this.props}></DisplayGrid>);\n        }\n        \n        \n        return (<div>\n            <span style={{color:\"red\"}}>\n            Error: Displayer of this type Not Implemented.\n            </span>\n        </div>);\n    }\n};\n\nexport class DisplayInner extends Component {\n    // This should be rendered inside some SVG tag.\n    render() {\n        if (this.props.quadrant !== undefined) {\n            return (<Quadrant {...this.props}></Quadrant>);\n        }\n        return (\n        <text fill=\"red\" x=\"0\" y=\"0\">\n            Error: Displayer of this type Not Implemented.\n        </text>\n        );\n    }\n};\n\nexport default Display;","module.exports = __webpack_public_path__ + \"static/cc-by-nc-sa-982c531432c4ad7e8dbf3cf52a1dc6d0.png\";","import React, {Component} from 'react';\nimport GraphToSVG, { GraphNode, GraphNodeUIHelper } from './display-ui/graph-to-svg';\nimport AnchorInfo from './display-ui/anchor-info';\n\nclass DisplayArray extends Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {}\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const newState = Object.assign({}, prevState);\n        const uiStores = [eval(`(` + nextProps.uiStore + `)`), nextProps.uiStoreFromAlgorithm];\n        \n        // TODO(tmt514): find correct way to detect whether to update.\n        if (true) {\n            const data = JSON.parse(nextProps.data);\n            newState.data = data || []\n            newState.n = (nextProps.n && parseInt(nextProps.n)) || data.length\n\n            newState.ui = new GraphToSVG;\n            while (newState.data.length < newState.n) {\n                newState.data.push(\"\")\n            }\n            \n            const nodelist = [];\n            for (let i = 0; i < newState.data.length; i++) {\n                const nodeProps = {\n                    id: `arr-${i}`,\n                    text: `${newState.data[i]}`,\n                    content: newState.data[i],\n                };\n                if (i === 0) {\n                    nodeProps.cx = 0;\n                    nodeProps.cy = 0;\n                } else {\n                    nodeProps.leftAnchors = [new AnchorInfo(`arr-${i-1}`, 0, 'boundary', 0)]\n                    nodeProps.cyAnchor = new AnchorInfo(`arr-${i-1}`, 0, 'center', 0);\n                }\n                \n                // Id corresponds to Index in the array.\n                uiStores.forEach((uiStore) => {\n                    GraphNodeUIHelper.updateNodePropsFromUIStore(nodeProps, uiStore, `${i}`, ['all', 'node'])\n                });\n                \n                const node = newState.ui.addNode(nodeProps);\n                nodelist.push(node);\n            }\n\n            var w = -Infinity;\n            var h = -Infinity;\n            nodelist.forEach((node) => {\n                const box = node.boundingShape.getCurrentBoundingRectangle();\n                w = Math.max(w, box.width);\n                h = Math.max(h, box.height);\n            })\n            \n            const newNodeProps = {\n                minHeight: h,\n            };\n            if (nextProps.fixedwidth !== undefined) {\n                newNodeProps.minWidth = w;\n            }\n            \n            nodelist.forEach((node) => {\n                node.updateProps(newNodeProps)\n            })\n            \n        }\n        \n        return newState;\n    }\n    \n    render() {\n        return (\n            <div className=\"has-text-centered\">\n            {this.state.ui.renderSVG()}\n            </div>\n        )\n    }\n}\n\nexport default DisplayArray;","import React from 'react';\n\nexport class Rectangle {\n\n    static getTextWidth(s, props) {\n        if (typeof window === `undefined`) {\n            return `${s}`.length*7;\n        }\n        var canvas = Rectangle.hiddenCanvas || (Rectangle.hiddenCanvas = window.document.createElement(\"canvas\"))\n        var ctx = canvas.getContext(\"2d\");\n        ctx.font = props.font;\n        return ctx.measureText(`${s}`).width;\n    }\n\n    constructor(props) {\n        this.props = props;\n        \n        const text = props.text;\n\n        this.textLines = text.split(\"\\n\").filter((e) => e !== \"\");\n        this.textWidth = Math.max(0, ...this.textLines.map((t) => Rectangle.getTextWidth(t, props)));\n        this.textHeight = this.textLines.length * props.lineHeight;\n        this.textPadding = props.textPadding;\n        \n        this.estimatedWidth = this.textWidth + this.textPadding*2;\n        this.estimatedHeight = this.textHeight + this.textPadding*2;\n        this.findActualBox();\n    }\n\n    updateShape() {\n        this.findActualBox();\n    }\n\n    getCurrentBoundingRectangle() {\n        return {width: this.actualWidth, height: this.actualHeight}\n    }\n\n    findActualBox() {\n        this.actualWidth = Math.max(this.estimatedWidth, this.props.minWidth||-Infinity)\n        this.actualWidth = Math.min(this.actualWidth, this.props.maxWidth||Infinity)\n        this.actualHeight = Math.max(this.estimatedHeight, this.props.minHeight||-Infinity)\n        this.actualHeight = Math.min(this.actualHeight, this.props.maxHeight||Infinity)\n    }\n\n    getPeripheralOffsetByAngle(degree) {\n        const rad = degree / 180.0 * Math.PI;\n        const c = Math.cos(rad);\n        const s = Math.sin(rad);\n        var vline = this.actualWidth/2;\n        var hline = this.actualHeight/2;\n        vline = (c === 0? Infinity: vline / c);\n        hline = (s === 0? Infinity: hline / s);\n        const dist = Math.min(Math.abs(vline), Math.abs(hline));\n        return {x: c*dist, y: s*dist}\n    }\n\n    renderSVG({x, y}) {\n        const cx = x;\n        const cy = y;\n        var boxWidth = this.actualWidth/2;\n        var boxHeight = this.actualHeight/2;\n        return (<polyline\n            points={`${cx-boxWidth} ${cy-boxHeight}\n                    ${cx+boxWidth} ${cy-boxHeight}\n                    ${cx+boxWidth} ${cy+boxHeight}\n                    ${cx-boxWidth} ${cy+boxHeight}\n                    ${cx-boxWidth} ${cy-boxHeight}`}\n            />)\n    }\n\n    updateViewBox(viewbox, {x, y}) {\n        const cx = x;\n        const cy = y;\n        var boxWidth = this.actualWidth/2;\n        var boxHeight = this.actualHeight/2;\n        var lx = cx-boxWidth;\n        var ly = cy-boxHeight;\n        var rx = cx+boxWidth;\n        var ry = cy+boxHeight;\n        lx = Math.floor(lx);\n        ly = Math.floor(ly);\n        rx = Math.ceil(rx);\n        ry = Math.ceil(ry);\n        \n        viewbox.lx = Math.min(viewbox.lx, lx);\n        viewbox.ly = Math.min(viewbox.ly, ly);\n        viewbox.rx = Math.max(viewbox.rx, rx);\n        viewbox.ry = Math.max(viewbox.ry, ry);\n    }\n};\n","export const defaultLineHeight = 16;","import React, {Component} from 'react';\nimport GraphToSVG, { GraphNode, GraphNodeUIHelper } from './display-ui/graph-to-svg';\nimport AnchorInfo from './display-ui/anchor-info';\nimport DataHelper from './data-helper';\n\n\nfunction combineUIHelpers(props) {\n    const uiStore = {\n        styleRules: {},\n    }\n    const contentToOptions = eval('('+(props[\"uihelper-content-map\"]||\"{}\")+')')\n    for (var content of Object.keys(contentToOptions)) {\n        uiStore.styleRules[`content-rule-${content}`] = {\n            apply_to: 'node',\n            pure_predicate_fn: `(nodeProps) => {return nodeProps.content === '${content}'}`,\n            options: contentToOptions[content],\n        }\n    }\n\n    \n    if (props[\"uihelper-node-style\"] !== undefined) {\n        const nodeOptions = eval('('+(props[\"uihelper-node-style\"]||\"{}\")+')')\n        uiStore.styleRules['all-node-style'] = {\n            apply_to: 'node',\n            pure_predicate_fn: `(nodeProps) => true`,\n            options: nodeOptions,\n        }\n    }\n    return uiStore;\n}\n\nclass DisplayGrid extends Component {\n    constructor() {\n        super();\n        this.state = {};\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const newState = Object.assign({}, prevState);\n        const uiStores = [\n            combineUIHelpers(nextProps),\n            eval(`(` + nextProps.uistore + `)`),\n            nextProps.uiStoreFromAlgorithm];\n\n        const data = DataHelper.getDataFromProps(nextProps);\n        newState.data = data || []\n        newState.n_row = (nextProps.n_row && parseInt(nextProps.n_row)) || data.length\n        newState.n_col = (nextProps.n_col && parseInt(nextProps.n_col)) || (data[0] && data[0].length) || 0\n        \n        newState.ui = new GraphToSVG;\n        while (newState.data.length < newState.n_row) {\n            newState.data.push(\" \".repeat(newState.n_col))\n        } \n        \n        const nodelist = [];\n        for (let i = 0; i < newState.n_row; i++) {\n            for (let j = 0; j < newState.n_col; j++) {\n                const nodeProps = {\n                    id: `grid-${i}-${j}`,\n                    text: `${newState.data[i][j]}`,\n                    content: newState.data[i][j],\n                    font: `12pt Courier New`,\n                    textPadding: 4,\n                    lineHeight: 12,\n                };\n\n                if (nextProps.notext !== undefined) {\n                    nodeProps.text = ``;\n                    nodeProps.textPadding = 10;\n                }\n                \n\n                if (i === 0 && j === 0) {\n                    nodeProps.cx = 0;\n                    nodeProps.cy = 0;\n                } else if (j > 0) {\n                    nodeProps.leftAnchors = [new AnchorInfo(`grid-${i}-${j-1}`, 0, 'boundary', 0)];\n                    nodeProps.cyAnchor = new AnchorInfo(`grid-${i}-${j-1}`, 0, 'center', 0);\n                } else { // i > 0.\n                    nodeProps.downAnchors = [new AnchorInfo(`grid-${i-1}-${j}`, 90, 'boundary', 0)];\n                    nodeProps.cxAnchor = new AnchorInfo(`grid-${i-1}-${j}`, 0, 'center', 0);\n                }\n                // Id corresponds to Coordinates in the array.\n                uiStores.forEach((uiStore) => {\n                    GraphNodeUIHelper.updateNodePropsFromUIStore(nodeProps, uiStore, JSON.stringify([i, j]), ['all', 'node'])\n                });\n                const node = newState.ui.addNode(nodeProps);\n                nodelist.push(node);\n            }\n        }\n        \n        var w = -Infinity;\n        var h = -Infinity;\n        nodelist.forEach((node) => {\n            const box = node.boundingShape.getCurrentBoundingRectangle();\n            w = Math.max(w, box.width);\n            h = Math.max(h, box.height);\n        })\n        \n        h = w = Math.max(w, h);\n        \n        const newNodeProps = {\n            minHeight: h,\n            minWidth: w,\n        };\n            \n        nodelist.forEach((node) => {\n            node.updateProps(newNodeProps)\n        })        \n        return newState;\n    }\n\n    render() {\n        return (\n            <div className=\"has-text-centered\">\n            {this.state.ui.renderSVG()}\n            </div>\n        )\n    }\n}\n\nexport default DisplayGrid;","\n// Helper functions converting different data fields into canonical internal formats.\nclass DataHelper {\n    static getDataFromProps(props) {\n        var data = undefined;\n\n        // The simplest format is a JSON string.\n        if (props.data !== undefined) {\n            if (props.data instanceof Array) {\n                return props.data;\n            }\n            return JSON.parse(props.data);\n        }\n    }\n};\n\nexport default DataHelper;","import React, { Component } from 'react';\nimport Display from './display';\nimport UIController from './display-ui/ui-controller';\n\nconst clone = (dictionary) => {\n    return JSON.parse(JSON.stringify(dictionary))\n}\n\nclass Algorithm extends Component {\n    constructor(props) {\n        super(props);\n        \n        const findAll = function(name) {\n            return props.children.filter((x) => x.type === name);\n        }\n        const findFirst = function(name) {\n            return findAll(name)[0];\n        }\n        const generator = findFirst(\"generator\");\n        const inputdata = findFirst(\"inputdata\");\n        const alldisplays = findAll(\"indirectdisplay\");\n        \n        // function*(input) {}\n        const code = generator\n            .props\n            .children\n            .filter((x) => x.type === \"pre\")[0]\n            .props\n            .children[0];\n        const solver = eval(\"(\" + code + \")\");\n\n        // Parse input.\n        const input = JSON.parse(inputdata.props.data);\n        \n        // Creates UI environment.\n        const ui = new UIController();\n\n        // Creates Generator and history storing all intermediate steps for the\n        // algorithm.\n        var gen = solver(input, ui);\n        var history = [clone(gen.next())];\n        var uiHistory = [ui.getSnapshot()];\n        ui.clearStyleOnce();\n\n        // Set States.\n        this.state = {\n            solver: solver,\n            input: input,\n            displays: alldisplays,\n            generator: gen,\n            stepId: 0,\n            history: history,\n            ui: ui,\n            uiHistory: uiHistory,\n        }\n        \n    }\n\n    changeStepBy(numMove) {\n        const newState = Object.assign({}, this.state);\n        newState.stepId += numMove;\n        while (newState.history.length <= newState.stepId\n            && newState.history[newState.history.length-1].done === false) {\n            const nextIter = newState.generator.next();\n            newState.history.push(clone(nextIter));\n            newState.uiHistory.push(newState.ui.getSnapshot());\n            newState.ui.clearStyleOnce();\n        }\n        newState.stepId = Math.max(0, newState.stepId);\n        newState.stepId = Math.min(newState.history.length-1, newState.stepId);\n        this.setState(newState);\n    }\n\n    render() {\n        const stepId = this.state.stepId;\n        const snapshot = this.state.history[stepId];\n        const uiSnapshot = this.state.uiHistory[stepId];\n        const displays = this.state.displays.map((e, idx) => {\n            const varname = e.props.varname;\n            const uiStore = {\n                styleRules: uiSnapshot.styleRules[varname],\n                styles: uiSnapshot.styles[varname],\n                onceStyles: uiSnapshot.onceStyles[varname],\n                annotations: uiSnapshot.annotations[varname],\n            };\n\n            return (\n                <Display\n                    key={idx}\n                    {...e.props}\n                    uiStoreFromAlgorithm={uiStore}\n                    data={JSON.stringify(snapshot.value[e.props.varname])}\n                />\n        )})\n        return (\n            <div>\n                <div className=\"has-text-centered\">\n                <button onClick={this.changeStepBy.bind(this, -1)}>Prev</button>\n                <span> Step: {this.state.stepId} </span>\n                <button onClick={this.changeStepBy.bind(this, 1)}>Next</button>\n                </div>\n                {displays}\n            </div>\n        )\n    }\n};\n\nexport default Algorithm;","export default class UIController {\n    \n    static RULES_COUNTER = 0;\n    \n    constructor() {\n        this.styleRules = {};\n        this.styles = {};\n        this.onceStyles = {};\n        this.annotations = {};\n    }\n    \n    getSnapshot() {\n        return JSON.parse(JSON.stringify(this));\n    }\n    \n    setStyle(varname, id, options) {\n        if (this.styles[varname] === undefined)\n            this.styles[varname] = {};\n        if (this.styles[varname][id] === undefined)\n            this.styles[varname][id] = {};\n        Object.assign(this.styles[varname][id], options);\n    }\n    \n    eraseStyle(varname, id, options) {\n        if (this.styles[varname] !== undefined)\n            this.styles[varname][id] = undefined;\n    }\n    \n    setStyleOnce(varname, id, options) {\n        if (this.onceStyles[varname] === undefined)\n            this.onceStyles[varname] = {};\n        if (this.onceStyles[varname][id] === undefined)\n            this.onceStyles[varname][id] = {};\n        Object.assign(this.onceStyles[varname][id], options);\n    }\n    \n    clearStyleOnce() {\n        this.onceStyles = {};\n    }\n    \n    addStyleRule(varname, apply_to, pure_predicate_fn, options) {\n        if (this.styleRules[varname] === undefined)\n            this.styleRules[varname] = {}\n        const rule_id = `ui-rule-${UIController.RULES_COUNTER}`;\n        UIController.RULES_COUNTER ++;\n        \n        this.styleRules[varname][rule_id] = {\n            apply_to: apply_to,\n            pure_predicate_fn: pure_predicate_fn.toString(),\n            options: options,\n        };\n        return rule_id;\n    }\n    \n    removeStyleRule(varname, rule_id) {\n        if (this.styleRules[varname] !== undefined) \n            this.styleRules[varname][rule_id] = undefined;\n    }\n    \n       \n};"],"sourceRoot":""}